<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="summary">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" type="text/css" href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">

<link rel="stylesheet" type="text/css" href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css" th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>

<script src="/webjars/popper.js/1.14.7/umd/popper.min.js" th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>

<script src="/webjars/jquery/3.4.1/jquery.min.js" th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>

<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js" th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js" th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js" th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<script src="js/bootstrap411.js"></script>

<style>
@media print {
	.no-print {
		display: none !important;
	}
}
</style>

<style>
.modal-backdrop.show {
	background-color: black;
}

td {
	background-color: #f8f7ff;
}

table.dataTable thead th, table.dataTable tfoot th {
	font-weight: normal;
}

table.table .thead-light th {
	font-size: 15px;
	border-color: #d4d7da;
}

select:focus {
	min-width: 150px;
	width: auto;
}

#hidden_div {
	display: none;
}

table th {
	color: white;
	background-color: #2e455deb;
	font-size: small;
}

.menu-title-header {
	padding: 0.45rem 0.45rem;
	background: #377486;
	color: #fff;
	font-family: "Nunito", calibry;
}

.modal-title {
	text-align: center;
	font-size: 14px;
	font-weight: 900;
	color: #332d2d;
	font-family: calibry
}

table td {
	font-size: small;
}

.container-manager {
	padding-right: 43px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 18.3%;
	margin-top: 80px;
}

.tab-content {
	display: none;
}

.modal {
	background-color: rgb(0, 0, 0);
	background-color: rgba(0, 0, 0, 0.4);
}

#successModal .modal-footer button {
	background-color: transparent !important;
	border-color: transparent !important;
}

.dataTables_filter input {
	color: black;
	background-color: white;
	float: right;
	margin-top: 10px;
	margin-right: 10px;
}

.dataTables_wrapper .dataTables_filter input[type="search"]::placeholder {
	color: black;
	font-style: italic;
}

.radio {
	display: none;
}

body {
	background-color: lightgrey;
}

select {
	width: 150px;
	margin: 10px;
}

select:focus {
	min-width: 150px;
	width: auto;
}

#hidden_div {
	display: none;
}

.menu-title-header {
	padding: 0.45rem 0.45rem;
	background: #377486;
	color: #fff;
	font-family: "Nunito", calibry;
}

.modal-title {
	text-align: center;
	font-size: 14px;
	font-weight: 900;
	color: #332d2d;
	font-family: calibry
}

#overlay {
	position: fixed;
	top: 0;
	z-index: 100;
	width: 100%;
	height: 100%;
	display: none;
	background: rgba(0, 0, 0, 0.6);
}

.cv-spinner {
	height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
}

/* Chrome, Safari, Edge, Opera */
input::-webkit-outer-spin-button, input::-webkit-inner-spin-button {
	-webkit-appearance: none;
	margin: 0;
}

.dataTables_empty {
	color: #be3232;
}

#Merchant_detials td, #merchant1 td, #Merchant_detials1 td {
	background-color: transparent !important;
}

.reqError {
	font-size: 14px;
	padding: 6px 0 4px;
	color: red;
	display: block
}

#status_enable-error {
	position: absolute;
	top: 23px;
	left: 14px;
}

.card {
	text-align: center;
	margin: 10px;
}

.card1, .card2 {
	text-align: center;
	margin: 10px;
	box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
	cursor: pointer;
}

.card2 {
	width: 290px;
	height: 270px;
	border-color: transparent;
	border: unset !important;
	align-items: center;
	cursor: pointer;
}

.card2 label {
	font-size: 22px !important;
	font-weight: 700 !important;
	color: #162b75;
	margin-top: 50px;
}

.card2 img {
	margin-top: 25px;
	width: 130px;
	height: 135px;
}

.card1:hover, .card2:hover {
	box-shadow: 3px 1px 11px 1px #e50707b3;
}

.card-image {
	width: 150px;
	height: 150px;
	margin: 10px;
	overflow: hidden;
	border-radius: 10px;
}

.card-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

td {
	font-size: small;
}

th {
	color: white;
	background-color: #2e455deb;
	font-size: medium;
}

table, tr {
	border-collapse: collapse;
	width: 100%;
}

th, td {
	border: 1px solid #dddddd;
	padding: 12px;
	text-align: left;
}

#imggStat {
	border-radius: 50%;
}

#alertStat {
	border-radius: 50%;
}

.modal {
	background-color: rgb(0, 0, 0);
	background-color: rgba(0, 0, 0, 0.4);
}

#successModal .modal-footer button {
	background-color: transparent !important;
	border-color: transparent !important;
}

.extra-input {
	display: none;
}

.profile-img-card {
	width: 300px;
	height: 300px;
	margin: 0 auto 10px;
	display: block;
	-moz-border-radius: 50%;
	-webkit-border-radius: 50%;
	border-radius: 50%;
}

#usertable td {
	padding: 13px;
	/* Adjust the padding as needed */
}

.dataTables_scrollBody {
	overflow: unset !important;
}

#qrTimer {
	color: #333;
	background-color: #f1f1f1;
	padding: 10px;
	border-radius: 5px;
}

.modal-header, .modal-footer {
	background-color: #f8f9fa;
}

.modal-title {
	color: #007bff;
}
</style>

<script th:inline="javascript">

		function generateDynamicQRCode() {
			var hasError = false;
			var tran_amt = $("#tran_amt_dy").val();
			var bill_num = $("#bill_number_dy").val();
			if (tran_amt === "" || parseFloat(tran_amt) === 0) {
				document.getElementById("tran_amt_dy_span").innerHTML = "Required and cannot be 0";
				hasError = true;
			} else {
				document.getElementById("tran_amt_dy_span").innerHTML = "";
			}
			if (bill_num === "" || bill_num.length < 3) {
				document.getElementById("bill_number_dy_span").innerHTML = "Bill Number should be at least 3";
				hasError = true;
			} else {
				document.getElementById("bill_number_dy_span").innerHTML = "";
			}
			if (hasError) {
				//$('#myModalpopup11').modal("toggle");
				//$('#myModalpopup11 .modal-body').text("Enter the required fields.");
			} else {
				var formattedTranAmt = parseFloat(tran_amt).toFixed(2);
				$.ajax({
					url: './dynamicQRCodeGenerate',
					method: 'GET',
					data: {
						tran_amt: formattedTranAmt,
						bill_num: bill_num
					},
					success: function (response) {
						if (response.success) {
							$("#qrCodeImage").attr("src", response.qrCodeUrl);
							$(".showDynamicLOAD").css("display", "none");
							$(".showDynamicQRCode").css("display", "block");
							startQRCodeTimer(response.qrValidTiming, response.merchantId, response.deviceId, response.refNumber);
						} else {
							$('#myModalpopup2').modal("toggle");
							$('#myModalpopup2 .modal-body').text(response.message || "Failed to generate QR code. Please try again.");
						}
					},
					error: function (xhr, status, error) {
						console.error("API call failed: ", error);
						$('#myModalpopup2').modal("toggle");
						$('#myModalpopup2 .modal-body').text("An error occurred while generating the QR code. Please try again.");
					}
				});
			}
		}

		function startQRCodeTimer(qrValidTiming, merchantId, deviceId, refNumber) {
			let timeLeft = qrValidTiming;
			const timerDisplay = document.getElementById('timerDisplay');
			const qrExpiredModal = new bootstrap.Modal(document.getElementById('qrExpiredModal'), {
				backdrop: 'static',
				keyboard: false
			});

			let timerInterval = setInterval(function () {
				if (timeLeft >= 0) {
					let minutes = Math.floor(timeLeft / 60);
					let seconds = timeLeft % 60;
					seconds = seconds < 10 ? '0' + seconds : seconds;
					timerDisplay.textContent = `${minutes}:${seconds}`;
					timeLeft--;
				} else {
					clearInterval(timerInterval);
					qrExpiredModal.show();
				}
			}, 1000);

			const taskInterval = setInterval(function () {
				performTask(merchantId, deviceId, refNumber);
			}, 5000);

			setTimeout(() => clearInterval(taskInterval), timeLeft * 1000);
		}

		function performTask(merchantId, deviceId, refNumber) {
			$.ajax({
				url: './getCustomerPayDetails',
				data: {
					merchantId: merchantId,
					deviceId: deviceId,
					refNumber: refNumber
				},
				type: 'POST',
				success: function (data) {
					if (data && data !== 'null') {
						clearInterval(timerInterval);
						clearInterval(taskInterval);
						 $('#myModalpopup2').modal("toggle");
			             $('#myModalpopup2 .modal-body').text(data);
					}
				},
				error: function (xhr, status, error) {
					console.error(xhr, status, error);
					let errorMessage = 'Error: ' + xhr.responseText + ' (Status: ' + status + ')';
					$('#myModalpopup2').modal("toggle");
		             $('#myModalpopup2 .modal-body').text("Payment failed due to a technical issue. Please try again later.");
				}
			});
		}

		function refreshPage() {
			location.reload();
		}

		function back() {
			window.history.back();
		}

	</script>

<script>
		function home() {
			location.href = './IPSDashboard'
		}
		function back() {
			window.history.back();
		}

		function validateMobileNumber(input) {
			var cleanValue = input.value.replace(/\D/g, '');
			// Limit to 10 digits
			cleanValue = cleanValue.substring(0, 8);
			input.value = cleanValue;
		}

		$(function () {
			$("#audit_date, #effective_date")
				.datepicker({
					dateFormat: "dd-mm-yy"
				});
		});
		$(function () {
			$("#transaction_date").datepicker({
				dateFormat: "dd-mm-yy"
			})
		});
		$(function () {
			$("#ticketdate")
				.datepicker({
					dateFormat: "dd-mm-yy"
				});
		});
		$(function () {
			$("#bill_date1")
				.datepicker({
					dateFormat: "dd-mm-yy"
				});
		});
		$(function () {
			$("#tran_date, #bill_date, #reversal_date")
				.datepicker({
					dateFormat: "dd-mm-yy"
				});
		});
		$(function () {
			$(
				"#passwordexpirydate1, #accountexpirydate1, #userdisablefromdate, #userdisabletodate")
				.datepicker({
					dateFormat: "dd-mm-yy"
				});
		});

		function backListScreen() {
			location.href = './merchantOperation?formmode=UserManClick';
		}

		function NotifiAdd() {
			location.href = './merchantOperation?formmode=NotifiAdd';
		}
		function Submituser(a) {
			var hasError = false;
			var email = $("#emailaddress").val();
			var password = $("#pw").val();
			var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			var passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,12}$/;
			var mobileNumber = $("#mobileno").val();

			function showError(element, message) {
				element.next(".error-message").remove();  // Remove existing error message if any
				element.after('<span class="error-message">' + message + '</span>');
			}

			function hideError(element) {
				element.next(".error-message").remove();  // Remove existing error message
			}

			if ($("#user").val() === "") {
				showError($("#user"), 'Required');
				hasError = true;
			} else {
				hideError($("#user"));
			}

			if ($("#username").val() === "") {
				showError($("#username"), 'Required');
				hasError = true;
			} else {
				hideError($("#username"));
			}

			if ($("#userdesignation").val() === "") {
				showError($("#userdesignation"), 'Required');
				hasError = true;
			} else {
				hideError($("#userdesignation"));
			}

			if ($("#userrole").val() === "") {
				showError($("#userrole"), 'Required');
				hasError = true;
			} else {
				hideError($("#userrole"));
			}

			if ($("#pw").val() === "") {
				showError($("#pw"), 'Required');
				hasError = true;
			} else {
				hideError($("#pw"));
			}

			if ($("#passwordexpirydate1").val() === "") {
				showError($("#passwordexpirydate1"), 'Required');
				hasError = true;
			} else {
				hideError($("#passwordexpirydate1"));
			}

			if ($("#passwordlife").val() === "") {
				showError($("#passwordlife"), 'Required');
				hasError = true;
			} else {
				hideError($("#passwordlife"));
			}

			if ($("#accountexpirydate1").val() === "") {
				showError($("#accountexpirydate1"), 'Required');
				hasError = true;
			} else {
				hideError($("#accountexpirydate1"));
			}

			if ($("#make_or_checker").val() === "") {
				showError($("#make_or_checker"), 'Required');
				hasError = true;
			} else {
				hideError($("#make_or_checker"));
			}

			if ($("#user_status1").val() === "") {
				showError($("#user_status1"), 'Required');
				hasError = true;
			} else {
				hideError($("#user_status1"));
			}

			if ($("#loginchannel").val() === "") {
				showError($("#loginchannel"), 'Required');
				hasError = true;
			} else {
				hideError($("#loginchannel"));
			}

			if ($("#mobileno").val() === "") {
				showError($("#mobileno"), 'Required');
				hasError = true;
			} else {
				hideError($("#mobileno"));
			}

			if (mobileNumber === "") {
				showError($("#mobileno"), 'Required');
				hasError = true;
			} else {
				var cleanedMobileNumber = mobileNumber.replace(/\D/g, '');
				if (cleanedMobileNumber.length !== 10 || isNaN(cleanedMobileNumber)) {
					showError($("#mobileno"), 'Please enter a valid 10-digit mobile number');
					hasError = true;
				} else {
					hideError($("#mobileno"));
				}
			}

			if ($("#emailaddress").val() === "") {
				showError($("#emailaddress"), 'Required');
				hasError = true;
			} else {
				hideError($("#emailaddress"));
			}

			if (!emailRegex.test(email)) {
				showError($("#emailaddress"), 'Enter a valid email address');
				alert("Email must end like @gmail.com, @yahoo...");
				hasError = true;
			} else {
				hideError($("#emailaddress"));
			}

			if ($("#defaultdeviceid").val() === "") {
				showError($("#defaultdeviceid"), 'Required');
				hasError = true;
			} else {
				hideError($("#defaultdeviceid"));
			}

			if ($("#unitid").val() === "") {
				showError($("#unitid"), 'Required');
				hasError = true;
			} else {
				hideError($("#unitid"));
			}

			if ($("#unitname").val() === "") {
				showError($("#unitname"), 'Required');
				hasError = true;
			} else {
				hideError($("#unitname"));
			}

			if ($("#unit_type").val() === "") {
				showError($("#unit_type"), 'Required');
				hasError = true;
			} else {
				hideError($("#unit_type"));
			}

			if (hasError) {
				alert("Please fill out all required fields");
			} else {
				var user_id = document.getElementById('user_id').value;
				$.ajax({
					url: './UserProfiles',
					data: $("#UserForm").serialize(),
					type: 'POST',
					success: function (data) {
						var modalContent = '<div class="modal" id="successRateModal">';
						modalContent += '<div class="modal-dialog modal-dialog-centered">';
						modalContent += '<div class="modal-content">';
						modalContent += '<div class="modal-header">';
						modalContent += '<p>Modified Successfully</p>';
						modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
						modalContent += '</div>';
						modalContent += '<div class="modal-footer">';
						modalContent += '<button type="button" class="btn btn-secondary" onclick="backListScreen();">Close</button>';
						modalContent += '</div>';
						modalContent += '</div>';
						modalContent += '</div>';
						modalContent += '</div>';

						$('body').append(modalContent);
						$('#successRateModal').modal('show');
					}
				});
			}
		}

		function handleIn(input) {
			input.value = input.value.replace(/[^a-zA-Z\s]/g, '').toUpperCase();
		}

		function handleInForId(input) {
			input.value = input.value.replace(/[^a-zA-Z0-9\s]/g, '').toUpperCase().trim();
		}

		function validateMobile(input) {
			var cleanValue = input.value.replace(/\D/g, '');
			// Limit to 10 digits
			cleanValue = cleanValue.substring(0, 10);
			input.value = cleanValue;
		}

		$(function () {
			var currentDate = new Date();

			// Initialize start_date with current date
			var startDatePicker = $("#start_date").datepicker({
				dateFormat: "dd-mm-yy",
				minDate: currentDate,
				onSelect: function (selectedDate) {
					var date = $(this).datepicker('getDate');
					if (date) {
						date.setDate(date.getDate() + 1);
					}
					$("#end_date").datepicker("option", "minDate", date);
					$("#end_date").prop("disabled", false); // Enable end date picker
				}
			}).datepicker("setDate", currentDate); // Set default date to current date

			// Initialize end_date with no minimum date initially and disable it
			var endDatePicker = $("#end_date").datepicker({
				dateFormat: "dd-mm-yy",
				onSelect: function (selectedDate) {
					var date = $(this).datepicker('getDate');
					if (date) {
						date.setDate(date.getDate() - 1);
					}
					$("#start_date").datepicker("option", "maxDate", date);
				}
			}).prop("disabled", true); // Disable end date picker initially

			// Set minDate for end_date to be one day after the current date
			var minEndDate = new Date(currentDate);
			minEndDate.setDate(minEndDate.getDate() + 1);
			$("#end_date").datepicker("option", "minDate", minEndDate);
		});


		$(document).ready(function () {
			var currentDate = new Date();
			var formattedDate = ('0' + currentDate.getDate()).slice(-2) + '-' +
				('0' + (currentDate.getMonth() + 1)).slice(-2) + '-' +
				currentDate.getFullYear();
			$("#record_date").val(formattedDate);
		});


		$(document).ready(function () {
			var currentDate = $.datepicker.formatDate('dd-mm-yy', new Date());

			$("#currentDate").val(currentDate); // Set the current date in the input field

			$("#currentDate").datepicker({
				dateFormat: 'dd-mm-yy',
				maxDate: new Date()

			});
		});
	</script>


<script>
		function getTransactionRecords() {
			var valueDate = $('#currentDate').val();
			$.ajax({
				url: './getTransactionRecords?valueDate=' + valueDate,
				type: 'GET',
				success: function (data) {
					var trHTML = '';
					if (data.length > 0) {
						data.forEach(function (entity) {

							var tranDate = entity.tran_date != null ? entity.tran_date : "";

							var tranAmount = entity.tran_amount != null ? entity.tran_amount : "";
							var merchantId = entity.merchant_id != null ? entity.merchant_id : "";
							var sequenceUniqueId = entity.sequence_unique_id != null ? entity.sequence_unique_id : "";
							var tranAuditNumber = entity.tran_audit_number != null ? entity.tran_audit_number : "";
							var user_id = entity.user_id != null ? entity.user_id : "";
							var unit_id = entity.unit_id != null ? entity.unit_id : "";
							var unit_name = entity.unit_name != null ? entity.unit_name : "";
							var ipsxAcct = entity.ipsx_account ? entity.ipsx_account.slice(0, 4) + 'XXXXXXX' + entity.ipsx_account.slice(-3) : "";
							var ipsxAcctName = entity.ipsx_account_name != null ? entity.ipsx_account_name : "";
							var cimAcct = entity.cim_account != null ? entity.cim_account.slice(0, 4) + 'XXXXXXX' + entity.cim_account.slice(-3) : "";
							var cimAcctName = entity.cim_account_name != null ? entity.cim_account_name : "";
							var tranCurrency = entity.tran_currency != null ? entity.tran_currency : "";
							var tranStatus = entity.tran_status != null ? entity.tran_status : "";
							var tranRemarks = entity.tran_rmks != null ? entity.tran_rmks : "";
							var reversalRemarks = entity.reversal_remarks != null ? entity.reversal_remarks : "";

							var color = tranStatus === 'SUCCESS' ? "green" : "red";


							trHTML += '<tr>' +
								'<td style="text-align: left;">' + tranDate + '</td>' +
								'<td style="text-align: left;">' + sequenceUniqueId + '</td>' +
								'<td style="text-align: left;">' + user_id + '</td>' +
								'<td style="text-align: left;">' + unit_id + '</td>' +
								'<td style="text-align: left;">' + ipsxAcctName + '</td>' +
								'<td style="text-align: left;">' + ipsxAcct + '</td>' +
								'<td style="text-align: left;">' + tranCurrency + '</td>' +
								'<td style="text-align: right;">' + tranAmount + '</td>' +
								'<td style="text-align:">' + tranStatus + '</td>' +
								'<td style="text-align: left;">' + tranRemarks + '</td>' +
								'<td style="text-align: left;">' + '<input type="radio" name="tranRemarks" value=' + sequenceUniqueId + ' onclick="customerTranView2(this.value);"></td>' +
								// Add more columns for end date and interest amount if needed
								'</tr>';
						});

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();


						$('#transactionBody').empty().append(trHTML);


						userTable.rows.add($('#transactionBody tr')).draw();

					} else {
						trHTML += '<tr><td colspan="10" class="text-center" style="color:red;">No data available</td></tr>';

						$('#transactionBody').empty().append(trHTML);

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();
					}




				},
				error: function () {
					showErrorModal('Error fetching data');
				}
			});
		}


		function getFeeAndChargesRecords() {
			var valueDate = $('#currentDate').val();
			$.ajax({
				url: './getFeesAndChargesRecords?valueDate=' + valueDate,
				type: 'GET',
				success: function (data) {
					var trHTML = '';
					if (data.length > 0) {
						data.forEach(function (entity) {
							var merchantId = entity.merchant_id != null ? entity.merchant_id : "";
							var user_id = entity.user_id != null ? entity.user_id : "";
							var unit_id = entity.unit_id != null ? entity.unit_id : "";
							var unit_name = entity.unit_name != null ? entity.unit_name : "";
							var tranDate = entity.tran_date != null ? entity.tran_date : "";
							var sequenceUniqueId = entity.sequence_unique_id != null ? entity.sequence_unique_id : "";
							var initiator_bank = entity.initiator_bank != null ? entity.initiator_bank : "Bank Of Baroda";
							var ipsxAcct = entity.ipsx_account != null ? entity.ipsx_account.slice(0, 4) + 'XXXXXXX' + entity.ipsx_account.slice(-3) : "";
							var conv_fee = entity.conv_fee != null ? entity.conv_fee : "";
							var charge_app_flg = entity.charge_app_flg != null ? entity.charge_app_flg : "";
							var tranAmount = entity.tran_amount != null ? entity.tran_amount : "";

							var ipsxAcctName = entity.ipsx_account_name != null ? entity.ipsx_account_name : "";
							var cimAcct = entity.cim_account != null ? entity.cim_account.slice(0, 4) + 'XXXXXXX' + entity.cim_account.slice(-3) : "";
							var cimAcctName = entity.cim_account_name != null ? entity.cim_account_name : "";
							var tranCurrency = entity.tran_currency != null ? entity.tran_currency : "";
							var tranStatus = entity.tran_status != null ? entity.tran_status : "";
							var tranRemarks = entity.tran_rmks != null ? entity.tran_rmks : "";
							var reversalRemarks = entity.reversal_remarks != null ? entity.reversal_remarks : "";
							
							
							var color = tranStatus === 'SUCCESS' ? "green" : "red";

							trHTML += '<tr>' +
								'<td style="text-align: left;">' + merchantId + '</td>' +
								'<td style="text-align: left;">' + user_id + '</td>' +
								'<td style="text-align: left;">' + unit_id + '</td>' +
								'<td style="text-align: left;">' + tranDate + '</td>' +
								'<td style="text-align: left;">' + sequenceUniqueId + '</td>' +
								'<td style="text-align: left;">' + ipsxAcct + '</td>' +
								'<td style="text-align: left;">' + conv_fee + '</td>' +
								'<td style="text-align: left;">' + charge_app_flg + '</td>' +
								'<td style="text-align: right;">' + tranCurrency + '</td>' +
								'<td style="text-align: right;">' + tranAmount + '</td>' +
								'<td style="text-align: left;">' + '<input type="radio" name="tranRemarks" value=' + sequenceUniqueId + ' onclick="listfees2(this.value);"></td>' +
								'</tr>';
						});

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();


						$('#transactionBody').empty().append(trHTML);


						userTable.rows.add($('#transactionBody tr')).draw();

					} else {
						trHTML += '<tr><td colspan="10" class="text-center" style="color:red;">No data available</td></tr>';

						$('#transactionBody').empty().append(trHTML);

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();
					}




				},
				error: function () {
					showErrorModal('Error fetching data');
				}
			});
		}


		function getTransactionDetailRecords() {
			var valueDate = $('#currentDate').val();
			$.ajax({
				url: './getTransactionRecords?valueDate=' + valueDate,
				type: 'GET',
				success: function (data) {
					var trHTML = '';
					if (data.length > 0) {
						data.forEach(function (entity) {

							var tranDate = entity.tran_date != null ? entity.tran_date : "";

							var tranAmount = entity.tran_amount != null ? entity.tran_amount : "";
							var merchantId = entity.merchant_id != null ? entity.merchant_id : "";
							var sequenceUniqueId = entity.sequence_unique_id != null ? entity.sequence_unique_id : "";
							var tranAuditNumber = entity.tran_audit_number != null ? entity.tran_audit_number : "";
							var user_id = entity.user_id != null ? entity.user_id : "";
							var unit_id = entity.unit_id != null ? entity.unit_id : "";
							var unit_name = entity.unit_name != null ? entity.unit_name : "";
							var ipsxAcct = entity.ipsx_account != null ? entity.ipsx_account.slice(0, 4) + 'XXXXXXX' + entity.ipsx_account.slice(-3) : "";
							var ipsxAcctName = entity.ipsx_account_name != null ? entity.ipsx_account_name : "";
							var cimAcct = entity.cim_account != null ? entity.cim_account.slice(0, 4) + 'XXXXXXX' + entity.cim_account.slice(-3) : "";
							var cimAcctName = entity.cim_account_name != null ? entity.cim_account_name : "";
							var tranCurrency = entity.tran_currency != null ? entity.tran_currency : "";
							var tranStatus = entity.tran_status != null ? entity.tran_status : "";
							var tranRemarks = entity.tran_rmks != null ? entity.tran_rmks : "";
							var reversalRemarks = entity.reversal_remarks != null ? entity.reversal_remarks : "";
							var initiator_bank = entity.initiator_bank != null ? entity.initiator_bank : "";
							var color = tranStatus === 'SUCCESS' ? "green" : "red";


							trHTML += '<tr>' +
								'<td style="text-align: left;">' + sequenceUniqueId + '</td>' +
								'<td style="text-align: left;">' + tranDate + '</td>' +
								'<td style="text-align: left;">' + user_id + '</td>' +
								'<td style="text-align: left;">' + unit_id + '</td>' +
								'<td style="text-align: left;">' + ipsxAcctName + '</td>' +
								'<td style="text-align: left;">' + ipsxAcct + '</td>' +
								'<td style="text-align: right;">' + tranAmount + '</td>' +
								'<td style="text-align:">' + tranStatus + '</td>' +
								'<td style="text-align: left;">' + '<input type="radio" name="tranRemarks" value=' + sequenceUniqueId + ' onclick="customerTranView2(this.value);"></td>' +
								'</tr>';
						});

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();


						$('#transactionBody').empty().append(trHTML);


						userTable.rows.add($('#transactionBody tr')).draw();

					} else {
						trHTML += '<tr><td colspan="10" class="text-center" style="color:red;">No data available</td></tr>';

						$('#transactionBody').empty().append(trHTML);

						var userTable = $('#usertable').DataTable({
							"destroy": true,
							"scrollCollapse": true,
							"paging": true,
							"autoWidth": false,
							"ordering": true,
							"oLanguage": {
								"sSearch": "",
								"sSearchPlaceholder": "Search Here"
							},
							"searching": true,
							"pageLength": 10,
							"lengthChange": false,
						});

						userTable.clear().draw();
					}




				},
				error: function () {
					showErrorModal('Error fetching data');
				}
			});
		}
	</script>

</head>

<body>
	<div th:insert="MMenupage :: header"></div>
	<div class="se-pre-con"></div>
	<div class="container-manager">
		<div id="overlay">
			<div class="cv-spinner">
				<span class="spinner"></span>
			</div>
		</div>

		<!----------------------------------------------ADD , VIEW---------------------------------------------------->

		<div th:if="${formmode}=='add'" class="content pt-2">
			<div class="card" style="border: 1px solid grey !important;">
				<div class="card-header">
					<div class="d-flex justify-content-between align-items-center">
						<h4 th:if="${formmode}=='add'" style="color: white; font-size: 25px; font-weight: 700;">Merchant Operation</h4>
						<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" id="btnBack" onclick="back();">Back</button>
					</div>
				</div>
				<div class="card-body">
					<div class="row formline" style="margin-top: 10px">
						<div class="col-sm-3">
							<div class="card card1" th:onclick="AdmClick(this)" style="width: 300px; height: 300px; padding-left: 40px; padding-top: 30px; border-color: transparent; cursor: pointer;">
								<img th:src="@{/images/admin_imgg.png}" id="admin_imgg" style="width: 183px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -60px; margin-top: 30px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Admin</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card1" onclick="QRClick()" style="width: 300px; height: 300px; padding-left: 60px; padding-top: 30px; border-color: transparent; cursor: pointer;">
								<img th:src=@{/images/stat_qr.png} id="admin_imgg" style="width: 173px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -70px; margin-top: 30px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Merchant QR</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card1" onclick="CustomerClick()" style="width: 300px; height: 300px; padding-left: 50px; padding-top: 10px; border-color: transparent; cursor: pointer;">
								<img th:src=@{/images/ScanPay.png} id="cust_png" style="width: 183px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -60px; margin-top: 10px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Scan Customer QR</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card1" onclick="TransClick()" style="width: 300px; height: 300px; padding-left: 60px; padding-top: 20px; border-color: transparent; cursor: pointer;">
								<img th:src=@{/images/TransDet.png} id="TransDet" style="width: 193px; height: 193px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -70px; margin-top: 20px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Transaction Details</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!------------------------------- Admin ---------------------------------->

		<div th:if="${formmode}=='Admin'">
			<div class="card">
				<div class="card-header">
					<div class="d-flex justify-content-between align-items-center">
						<h4 th:if="${formmode}=='Admin'" style="color: white; font-size: 1.5rem; font-weight: 700">Merchant Operation</h4>
						<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" id="btnBack" onclick="back();">Back</button>
					</div>
				</div>

				<div class="card-body">
					<div class="row">
						<div class="col-sm-3">
							<div class="card card2" th:onclick="UserManClick(this)" th:attr="data-user_id=${user_id}">
								<img th:src="@{/images/user.png}" id="ic_usermanage" alt="Bornfire"> <label style="">User Management</label>
							</div>
							<div class="card card2" onclick="DeviceManClick()">
								<img th:src=@{/images/device.png} id="Device_manage" alt="Bornfire">
								<div class="container">
									<label style="">Device Management</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card2" onclick="RateClick()">
								<img th:src=@{/images/rate.png} id="ic_rate" alt="Bornfire">
								<div class="container">
									<label style="">Rate Maintenance</label>
								</div>
							</div>
							<div class="card card2" onclick="CustClick()">
								<img th:src=@{/images/Cust_Trans.png} id="Cust_Trans" alt="Bornfire">
								<div class="container">
									<label style="">Customer Transaction</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card2" onclick="FeesClick()">
								<img th:src=@{/images/fees.png} id="Fess_Charges" alt="Bornfire">
								<div class="container">
									<label style="">Fees and Charges</label>
								</div>
							</div>
							<div class="card card2" onclick="ChargeClick()">
								<img th:src=@{/images/Charge_Backs.png} id="Charge_Backs" alt="Bornfire">
								<div class="container">
									<label style="">Charge Backs</label>
								</div>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="card card2" onclick="AlertClick()">
								<img th:src=@{/images/ic_alert.png} id="ic_alert" alt="Bornfire">
								<div class="container">
									<label style="">Alert and Notification</label>
								</div>
							</div>
							<div class="card card2" onclick="ServClick()">
								<img th:src=@{/images/Serv_Req.png} id="Serv_Req" alt="Bornfire">
								<div class="container">
									<label style="">Service Request</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!------------------------------- UserManClick ---------------------------------->

		<div th:if="${formmode}=='UserManClick'" class="content card">
			<div class="card-header">
				<div class="float-left">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">User Management - List</h4>
				</div>
			</div>

			<div>
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable" style="table-layout: fixed; width: 100%;">
					<thead>
						<tr>
							<th>Merchant Id</th>
							<th>User Id</th>
							<th>User Name</th>
							<th>Email Id</th>
							<th>Unit Id</th>
							<th>Unit Name</th>
							<th>Select</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="User:${pro}">
							<td th:text="${User?.merchant_user_id != null ? User.merchant_user_id.toUpperCase() : ''}"></td>
							<td th:text="${User?.user_id != null ? User.user_id.toUpperCase() : ''}"></td>
							<td th:text="${User?.user_name != null ? User.user_name.toUpperCase() : ''}"></td>
							<td th:text="${User?.email_address1 != null ? User.email_address1.toUpperCase() : ''}"></td>
							<td><span th:text="${(User.unit_id_u == 'null' or User.unit_id_u == null or User.unit_id_u.trim() == '') ? '' : User.unit_id_u}"></span></td>
							<td><span th:text="${(User.unit_name_u == 'null' or User.unit_id_u == null or User.unit_name_u.trim() == '') ? '' : User.unit_name_u}"></span></td>
							<td><input type="radio" th:id="${User.user_id}" name="btnradio" style="cursor: pointer;" th:attr="data-user_id=${User.user_id}" onclick="listuser(this);"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm btn-primary commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm btn-primary commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------------------------------- viewuser ---------------------------------->

		<div class="content pt-2" th:if="${formmode}=='viewuser'or ${formmode}=='edituser'">
			<div class="card">
				<div class=" card-header" style="width: 100%;">
					<div class="float-left">
						<h4 th:if="${formmode}=='viewuser'" style="color: white; font-size: 1.5rem;">User Management - Details</h4>
						<h4 th:if="${formmode}=='edituser'" style="color: white; font-size: 1.5rem;">User Management</h4>
					</div>
				</div>
				<div class="card-body pb-0 mb-0">
					<form action="#" method="POST" autocomplete="off" th:object="${MerchantView}" id="UserForm" name="Userf" style="width: 100%;">
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="merchant_user_id">Merchant User Id</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="merchant_user_id" name="merchant_user_id" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.merchant_user_id}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="merchant_user_id" name="merchant_user_id" th:value="${MerchantView.merchant_user_id}" class="form-control form-control-sm" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:if="${formmode}=='edituser'" readonly>
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="merchant_name">Merchant Name</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="merchant_name" name="merchant_name" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.merchant_name}" th:if="${formmode}=='viewuser'" readonly> <input
									type="text" id="merchant_name" name="merchant_name" th:if="${formmode}=='edituser'" th:value="${MerchantView.merchant_name}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off" readonly>
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="user_id">User Id</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="user_id" name="user_id" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_id}" th:if="${formmode}=='viewuser'" readonly> <input type="text"
									id="user_id" name="user_id" th:value="${MerchantView.user_id}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" autocomplete="off"
									th:if="${formmode}=='edituser'" readonly>
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="user_name">User Name</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="username" name="user_name" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_name}" th:if="${formmode}=='viewuser'" readonly> <input type="text"
									id="username" name="user_name" th:if="${formmode}=='edituser'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${MerchantView.user_name}" class="form-control form-control-sm"
									autocomplete="off" readonly>
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="user_designation">User Designation<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="userdesignation" name="user_designation" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_designation}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="userdesignation" name="user_designation" th:value="${MerchantView.user_designation}" th:if="${formmode}=='edituser'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="user_role">User Role <span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="userrole" name="user_role" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_role}" th:if="${formmode}=='viewuser'" readonly> <input type="text"
									id="userrole" name="user_role" th:value="${MerchantView.user_role}" th:if="${formmode}=='edituser'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
									autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="password_expiry_date">Password Expiry Date<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="" name="password_expiry_date1" class="form-control form-control-sm" autocomplete="off" th:value="${#dates.format(MerchantView.password_expiry_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='viewuser'" readonly> <input type="text" id="passwordexpirydate1" name="password_expiry_date1" th:value="${ #dates.format(MerchantView.password_expiry_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='edituser'" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="account_expiry_date">Account Expiry Date<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="" name="account_expiry_date1" class="form-control form-control-sm" autocomplete="off" th:value="${#dates.format(MerchantView.account_expiry_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='viewuser'" readonly> <input type="text" id="accountexpirydate1" name="account_expiry_date1" th:value="${#dates.format(MerchantView.account_expiry_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='edituser'" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="make_or_checker">Maker or Checker<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="make_or_checker" name="make_or_checker" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.make_or_checker}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="make_or_checker" name="make_or_checker" class="form-control form-control-sm" autocomplete="off" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" value="CHECKER"
									th:if="${formmode}=='edituser'" readonly>
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="login_channel">Login Channel<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="loginchannel" name="login_channel1" class="form-control form-control-sm" autocomplete="off" value="WEB" th:value="${MerchantView.login_channel1}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="loginchannel" name="login_channel1" class="form-control form-control-sm" autocomplete="off" value="WEB" th:value="${MerchantView.login_channel1}"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:if="${formmode}=='edituser'">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="user_disable_from_date">User Diable From Date</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="" name="user_disable_from_date1" class="form-control form-control-sm" autocomplete="off" th:value="${#dates.format(MerchantView?.user_disable_from_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='viewuser'" readonly> <input type="text" id="userdisablefromdate" name="user_disable_from_date1" th:value="${#dates.format(MerchantView?.user_disable_from_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='edituser'" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="user_disable_to_date">User Diable To Date</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="" name="user_disable_to_date1" class="form-control form-control-sm" autocomplete="off" th:value="${#dates.format(MerchantView.user_disable_to_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='viewuser'" readonly> <input type="text" id="userdisabletodate" name="user_disable_to_date1" th:value="${#dates.format(MerchantView.user_disable_to_date1, 'dd-MM-yyyy')}"
									th:if="${formmode}=='edituser'" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="mobile_no">Mobile No<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="number" id="mobileno" name="mobile_no1" maxlength="10" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.mobile_no1}" th:if="${formmode}=='viewuser'" readonly>
								<input type="number" id="mobileno" name="mobile_no1" maxlength="10" th:value="${MerchantView.mobile_no1}" oninput="validateMobile(this)" th:if="${formmode}=='edituser'" class="form-control form-control-sm"
									autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="alternate_mobile_no">Alternate Mobile No</label>
							</div>
							<div class="col-sm-3">
								<input type="number" id="alternatemobileno" name="alternate_mobile_no1" maxlength="10" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.alternate_mobile_no1}"
									th:if="${formmode}=='viewuser'" readonly> <input type="number" id="alternatemobileno" name="alternate_mobile_no1" maxlength="10" oninput="validateMobile(this)" class="form-control form-control-sm"
									th:value="${MerchantView.alternate_mobile_no1}" th:if="${formmode}=='edituser'" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="email_address1">Email Address<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="email" id="emailaddress" name="email_address1" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.email_address1}" th:if="${formmode}=='viewuser'" readonly> <input
									type="email" id="emailaddress" name="email_address1" th:value="${MerchantView.email_address1}" th:if="${formmode}=='edituser'" class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="alternate_email_id">Alternate Email Id </label>
							</div>
							<div class="col-sm-3">
								<input type="email" id="alternateemailid" name="alternate_email_id1" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.alternate_email_id1}" th:if="${formmode}=='viewuser'" readonly>
								<input type="email" id="alternateemailid" name="alternate_email_id1" th:value="${MerchantView.alternate_email_id1}" th:if="${formmode}=='edituser'" class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="alternative_device_id1">Alternative Device Id 1</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="alternative_device_id1" name="alternative_device_id1" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_id}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="alternative_device_id1" name="alternative_device_id1" th:value="${MerchantView.alternative_device_id1}" th:if="${formmode}=='edituser'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="Alternative
													Device Id1">Alternative Device Id 2<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="	alternative_device_id2" name="alternative_device_id2" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.alternative_device_id2}"
									th:if="${formmode}=='viewuser'" readonly> <input type="text" id="alternative_device_id2" name="alternative_device_id2" th:value="${MerchantView.alternative_device_id2}" th:if="${formmode}=='edituser'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="default_device_id">Default Device Id<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="defaultdeviceid" name="default_device_id" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.default_device_id}" th:if="${formmode}=='viewuser'" readonly>
								<input type="text" id="defaultdeviceid" name="default_device_id" th:value="${MerchantView.default_device_id}" th:if="${formmode}=='edituser'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="unit_name">Unit Name<span style="color: red; font-size: 20px;" th:if="${formmode}=='edituser'"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unitname" name="unit_name_u" th:value="${MerchantView.unit_name_u}" th:if="${formmode}=='viewuser'" onkeyup="this.value = this.value.toUpperCase();" class="form-control form-control-sm"
									readonly> <input type="text" id="unitname" name="unit_name_u" th:value="${MerchantView.unit_name_u}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:if="${formmode}=='edituser'"
									class="form-control form-control-sm">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="unit_id">Unit Id<span style="color: red; font-size: 20px;" th:if="${formmode}=='edituser'"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unitid" name="unit_id_u" th:if="${formmode}=='viewuser'" th:value="${MerchantView.unit_id_u}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly> <input type="text" id="unitid" name="unit_id_u" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${MerchantView.unit_id_u}"
									th:if="${formmode}=='edituser'" autocomplete="off" class="form-control form-control-sm">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2 text-left">
								<label for="unit_type">Unit Type <span style="color: red; font-size: 20px;" th:if="${formmode}=='edituser'"> *</span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unit_type" name="unit_type_u" th:if="${formmode}=='viewuser'" th:value="${MerchantView.unit_type_u}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly> <input type="text" id="unit_type" name="unit_type_u" th:value="${MerchantView.unit_type_u}" th:if="${formmode}=='edituser'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="user_status">User Status<span th:if="${formmode}=='edituser'" style="color: red; font-size: 20px;"> *</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="user_status1" name="user_status1" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_status1}" th:if="${formmode}=='viewuser'" readonly> <input
									type="text" id="user_status1" name="user_status1" class="form-control form-control-sm" autocomplete="off" th:value="${MerchantView.user_status1}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									th:if="${formmode}=='edituser'">
							</div>
						</div>
						<label></label>
						<div class="card-footer text-center mt-2">
							<button type="button" class="btn btn-sm btn-primary commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
							<button type="button" class="btn btn-sm btn-primary commonBtnStyle mr-2" th:if="${formmode}=='edituser'" data-dismiss="modal" onclick="Submituser(this);">Submit</button>
							<button type="button" class="btn btn-sm btn-primary commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
						</div>
						<div class="content mt-2" style="padding: 15px; background-color: #dbdfe2;">
							<div class="row formline">
								<label class="col-sm-1">Entry User</label>
								<div class="col-sm-2">
									<input type="text" id="entry_user_add" form="BankandBranch" class="form-control form-control-sm" name="entry_user" th:value="${MerchantView?.entry_user}" autocomplete="off" readonly>
								</div>
								<div class="col-sm-1"></div>
								<label class="col-sm-1">Modify User</label>
								<div class="col-sm-2">
									<input type="text" th:value="${MerchantView?.modify_user}" id="modify_user_add" class="form-control form-control-sm" name="modify_user_add" autocomplete="off" readonly>
								</div>
								<div class="col-sm-1"></div>
								<label class="col-sm-1">Verify User</label>
								<div class="col-sm-2">
									<input type="text" id="auth_user_add" th:value="${MerchantView?.verify_user}" class="form-control form-control-sm" name="verify_user" autocomplete="off" readonly>
								</div>
							</div>
							<div class="row formline mt-2">
								<label class="col-sm-1">Entry Time</label>
								<div class="col-sm-2">
									<input type="text" id="entry_time_add" class="form-control form-control-sm" name="entry_time" th:value="${#dates.format(MerchantView?.entry_time,'dd-MM-yyyy HH:mm')}" autocomplete="off" readonly>
								</div>
								<div class="col-sm-1"></div>
								<label class="col-sm-1">Modify Time</label>
								<div class="col-sm-2">
									<input type="text" id="modify_time_add" name="modify_time" th:value="${#dates.format(MerchantView?.modify_time,'dd-MM-yyyy HH:mm')}" class="form-control form-control-sm" autocomplete="off" readonly>
								</div>
								<div class="col-sm-1"></div>
								<label class="col-sm-1">Verify Time</label>
								<div class="col-sm-2">
									<input type="text" id="auth_time_add" name="verify_time" class="form-control form-control-sm" autocomplete="off" readonly th:value="${#dates.format(MerchantView?.verify_time,'dd-MM-yyyy HH:mm')}">
								</div>
							</div>
						</div>

					</form>
				</div>
			</div>
		</div>

		<!------------------------------- DeviceManClick ---------------------------------->

		<div th:if="${formmode}=='DeviceManClick'" class="content card">
			<div class="card-header">
				<div class="float-left">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Device Management - List</h4>
				</div>
			</div>
			<table class="table table-striped table-bordered  table-hover table-sm" id="usertable" style="table-layout: fixed; width: 100%;">
				<thead>
					<tr>
						<th>Merchant Id</th>
						<th>Device Id</th>
						<th>Device Name</th>
						<th>Default Status</th>
						<th>Unit Id</th>
						<th>Unit Name</th>
						<th>Select</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="Device:${Man}">
						<td th:text="${Device?.merchant_user_id != null ? Device.merchant_user_id.toUpperCase() : ''}"></td>
						<td th:text="${Device?.device_id != null ? Device.device_id.toUpperCase() : ''}"></td>
						<td th:text="${Device?.device_name != null ? Device.device_name.toUpperCase() : ''}"></td>
						<td th:text="${Device?.device_status != null ? Device.device_status.toUpperCase() : ''}"></td>
						<td th:text="${Device?.unit_id_d != null ? Device.unit_id_d.toUpperCase() : ''}"></td>
						<td th:text="${Device?.unit_name_d != null ? Device.unit_name_d.toUpperCase() : ''}"></td>
						<td><input type="radio" name="btnradio" style="cursor: pointer;" th:attr="data-device_id=${Device.device_id}" th:id="${Device.device_id}" onclick="listDevice(this);"></td>
					</tr>
				</tbody>
			</table>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------------------------------- viewdevice ---------------------------------->

		<div class="content" th:if="${formmode}=='viewdevice'or ${formmode}=='editdevice'">
			<div class="card">
				<div class=" card-header">
					<div class="float-left">
						<h4 th:if="${formmode}=='viewdevice'" style="color: white; font-size: 1.5rem;">Device Management - View</h4>
						<h4 th:if="${formmode}=='editdevice'" style="color: white; font-size: 1.5rem;">Device Management - Modify</h4>
					</div>
				</div>
				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" th:object="${DeviceManage}" id="DeviceForm" name="Devicef">
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="merchant_user_id">Merchant User Id<span style="color: red; font-size: 20px;"> </span></label>

							</div>
							<div class="col-sm-3">
								<input type="text" id="merchant_user_id" name="merchant_user_id" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.merchant_user_id}" readonly>
								<input type="text" id="merchant_user_id" name="merchant_user_id" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.merchant_user_id}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off" readonly>
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="merchant_name">Merchant Name<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="merchant_name" name="merchant_name" onkeyup="this.value = this.value.toUpperCase();" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.merchant_name}"
									class="form-control form-control-sm" autocomplete="off" readonly> <input type="text" id="merchant_name" name="merchant_name" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									th:if="${formmode}=='editdevice'" th:value="${DeviceManage.merchant_name}" class="form-control form-control-sm" autocomplete="off" readonly>
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_id">Device Id<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_id" name="device_id" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_id}" readonly> <input
									type="text" id="device_id" name="device_id" th:if="${formmode}=='editdevice'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.device_id}"
									class="form-control form-control-sm" autocomplete="off" readonly>
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_name">Device Name<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_name" name="device_name" onkeyup="this.value = this.value.toUpperCase();" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_name}"
									class="form-control form-control-sm" autocomplete="off" readonly> <input type="text" id="device_name" name="device_name" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									th:if="${formmode}=='editdevice'" th:value="${DeviceManage.device_name}" class="form-control form-control-sm" autocomplete="off" readonly>
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_identification_no">Device Identification No<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_identification_no" name="device_identification_no" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_identification_no}" class="form-control form-control-sm"
									autocomplete="off" readonly> <input type="text" id="device_identification_no" name="device_identification_no" th:if="${formmode}=='editdevice'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.device_identification_no}" class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_machine_id">Device Machine Id<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_machine_id" name="device_machine_id" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_machine_id}" readonly class="form-control form-control-sm" autocomplete="off">
								<input type="text" id="device_machine_id" name="device_machine_id" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.device_machine_id}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_model">Device Model<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_model" name="device_model" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_model}" class="form-control form-control-sm" autocomplete="off" readonly> <input
									type="text" id="device_model" name="device_model" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.device_model}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_make">Device Make<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="device_make" name="device_make" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_make}" readonly class="form-control form-control-sm" autocomplete="off"> <input
									type="text" id="device_make" name="device_make" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.device_make}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="location">Location<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="location" name="location" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.location}" readonly class="form-control form-control-sm" autocomplete="off"> <input type="text"
									id="location" name="location" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.location}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
									autocomplete="off">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="store_id">Store Id<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="store_id" name="store_id" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.store_id}" readonly class="form-control form-control-sm" autocomplete="off"> <input type="text"
									id="store_id" name="store_id" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.store_id}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
									autocomplete="off">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="fingerprint_enable">Finger Print Enable<span style="color: red; font-size: 20px;"></span></label>
							</div>
							<div class="col-sm-3">
								<!-- <input type="radio" name="fingerprint_enable" Value="Yes"
										id="fingerprint_enable" required> <label>Yes</label> <input
										type="radio" Style="margin-left: 30px"
										name="fingerprint_enable" Value="No" id="fingerprint_enable"
										required> <label>No</label> -->
								<input type="text" id="fingerprint_enable" name="fingerprint_enable" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.fingerprint_enable}"
									readonly> <input type="text" id="fingerprint_enable" name="fingerprint_enable" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='editdevice'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.fingerprint_enable}">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="face_recognition_enabled">Face Recognition Enabled<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-3">
								<!-- <input type="radio" name="face_recognition_enabled" Value="Yes"
										id="face_recognition_enabled" required> <label>Yes</label>
									<input type="radio" Style="margin-left: 30px"
										name="face_recognition_enabled" Value="No"
										id="face_recognition_enabled" required> <label>No</label> -->
								<input type="text" id="face_recognition_enabled" name="face_recognition_enabled" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'"
									th:value="${DeviceManage.face_recognition_enabled}" readonly> <input type="text" id="face_recognition_enabled" name="face_recognition_enabled" class="form-control form-control-sm" autocomplete="off"
									th:if="${formmode}=='editdevice'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.face_recognition_enabled}">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="default_user_id">Default User Id <span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="default_user_id" name="default_user_id" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.default_user_id}" readonly>
								<input type="text" id="default_user_id" name="default_user_id" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='editdevice'"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.default_user_id}">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="alternate_user_id">Alternate User Id</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="alternate_user_id" name="alternate_user_id" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.alternate_user_id}" readonly>
								<input type="text" id="alternate_user_id" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" name="alternate_user_id" class="form-control form-control-sm" autocomplete="off"
									th:if="${formmode}=='editdevice'" th:value="${DeviceManage.alternate_user_id}">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="approved_user">Approved User<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="approved_user" name="approved_user" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.approved_user}" readonly> <input
									type="text" id="approved_user" name="approved_user" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='editdevice'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									th:value="${DeviceManage.approved_user}">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="defined_user">Defined User</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="defined_user" name="defined_user" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.defined_user}" readonly> <input
									type="text" id="defined_user" name="defined_user" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='editdevice'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									th:value="${DeviceManage.defined_user}">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="user1">User 1<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="user1" name="user1" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.user1}" readonly> <input type="text"
									id="user1" name="user1" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='editdevice'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${DeviceManage.user1}">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="user2">User 2</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="user2" name="user2" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.user2}" readonly> <input type="text"
									id="user2" name="user2" class="form-control form-control-sm" autocomplete="off" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.user2}">
							</div>
						</div>
						<label></label>
						<div class="row formline">
							<div class="col-sm-2" style="text-align: left;">
								<label for="device_status">Device Status<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<!-- <select name="device_status" id="device_status"
										th:if="${formmode}=='MerMastadd'" style="width: 100%"
										class="form-control form-control-sm" autocomplete="off"
										required>
										<option value="">SELECT</option>
										<option value="Active">Active</option>
										<option value="Inactive">Inactive</option>
									</select> -->
								<input type="text" id="device_status" name="device_status" class="form-control form-control-sm" autocomplete="off" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.device_status}" readonly> <input
									type="text" id="device_status" name="device_status" class="form-control form-control-sm" autocomplete="off" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:if="${formmode}=='editdevice'"
									th:value="${DeviceManage.device_status}">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="unit_id_d">Unit Id<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unitidd" name="unit_id_d" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.unit_id_d}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly> <input type="text" id="unitidd" name="unit_id_d" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.unit_id_d}"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" autocomplete="off" class="form-control form-control-sm">
							</div>

						</div>
						<label></label>
						<div class="row formline" style="text-align: left;">

							<div class="col-sm-2">
								<label for="unit_type_d">Unit Type <span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unittyped" name="unit_type_d" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.unit_type_d}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly> <input type="text" id="unittyped" name="unit_type_d" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.unit_type_d}"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" autocomplete="off" class="form-control form-control-sm">
							</div>
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left;">
								<label for="unit_name_d">Unit Name<span style="color: red; font-size: 20px;"> </span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="unitnamed" name="unit_name_d" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.unit_name_d}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly> <input type="text" id="unitnamed" name="unit_name_d" th:if="${formmode}=='editdevice'" th:value="${DeviceManage.unit_name_d}"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)" autocomplete="off" class="form-control form-control-sm">
							</div>
						</div>
						<label></label>
						<div class="row formline" style="text-align: left;">
							<div class="col-sm-2">
								<label for="terminal_id">Terminal Id </label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="terminal_id" name="terminal_id" th:if="${formmode}=='viewdevice'" th:value="${DeviceManage.terminal_id}" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off"
									class="form-control form-control-sm" readonly>
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStylemr-2" th:if="${formmode}=='editdevice'" data-dismiss="modal" onclick="Submitdevice(this);">Submit</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- RateClick ---------------------------------->

		<div th:if="${formmode}=='RateClick'" class="content card mt-3">
			<div class="card-header">
				<div class="float-left">
					<h4 style="color: white; font-size: 1.5rem;">Rate Maintenance</h4>
				</div>
				<div class="float-right">
					<button type="button" class="btn btn-sm btn-primary" id="rateAdd" onclick="addRate();">Add</button>
				</div>
			</div>

			<div>
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>SRL</th>
							<th>Effective Date</th>
							<th>Current Date</th>
							<th>Billing Currency</th>
							<th>Settlement Currency</th>
							<th>Rate</th>
							<th>Select</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="maintenance, iterator :${Rate}">
							<td th:text="${iterator.index +1}"></td>
							<td th:text="${#dates.format(maintenance.effective_date,'dd-MM-yyy')}"></td>
							<td th:text="${#dates.format(maintenance.audit_date,'dd-MM-yyy')}"></td>
							<td th:text="${maintenance?.billing_currency != null ? maintenance.billing_currency.toUpperCase() : ''}"></td>
							<td th:text="${maintenance?.settlement_currency != null ? maintenance.settlement_currency.toUpperCase() : ''}"></td>
							<td style="text-align: right;" th:text="${maintenance?.rate != null ? maintenance.rate.toUpperCase() : ''}"></td>
							<td><input type="radio" id="btnclick" name="btnradio" style="cursor: pointer;" th:attr="data-srl=${maintenance.srl}" th:id="${maintenance.srl}" onclick="listRate(this); openForm();  "></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center" style="margin-top: 30px;">
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------ addRate ------------>

		<div class="content pt-3" th:if="${formmode}=='addRate'or ${formmode}=='viewRate'or ${formmode}=='editRate'">
			<div class="card">
				<div class=" card-header">
					<div class="float-left">
						<h4 th:if="${formmode}=='addRate'" style="color: white; font-size: 1.5rem;">Rate Maintenance</h4>
						<h4 th:if="${formmode}=='viewRate'" style="color: white; font-size: 1.5rem;">Rate Maintenance</h4>
						<h4 th:if="${formmode}=='editRate'" style="color: white; font-size: 1.5rem;">Rate Maintenance</h4>
					</div>
					<div class="float-right">
						<button type="button" th:if="${formmode}=='viewRate'" class="btn btn-sm btn-primary" id="Rateedit" onclick="Rateedit();">Edit</button>
					</div>
				</div>
				<div class="card-body pb-0" style="background-color: gainsboro;">
					<form action="#" method="POST" autocomplete="off" th:object="${Rate}" id="RateForm" style="width: 100%;">
						<div style="width: 100%;">
							<div style="margin-left: 400px">
								<div class="row formline" Style="display: none">
									<div class="col-sm-3" style="text-align: left">
										<label for="srl" style="font-size: 14px;">SRL_No<span style="color: red; font-size: 20px;"> *</span>
										</label>
									</div>
									<div class="col-sm-3" style="display: none">

										<input type="text" id="srl" th:if="${formmode}=='viewRate'" name="srl" class="form-control form-control-sm" th:value="${Rate.srl}" disabled> <input type="number" id="srl" th:if="${formmode}=='editRate'"
											name="srl" class="form-control form-control-sm" th:value="${Rate.srl}" readonly>
									</div>
								</div>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="billing_currency" style="font-size: 14px;">Billing Currency <span style="color: red; font-size: 20px;"> *</span>
										</label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="billing_currency" th:if="${formmode}=='addRate'" name="billing_currency" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" value="BWP"
											readonly> <input type="text" id="billing_currency" th:if="${formmode}=='viewRate'" name="billing_currency" class="form-control form-control-sm" th:value="${Rate.billing_currency}" value="BWP" disabled>
										<input type="text" id="billing_currency" th:if="${formmode}=='editRate'" name="billing_currency" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
											th:value="${Rate.billing_currency}" value="BWP" readonly>
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="settlement_currency" style="font-size: 14px;">Settlement Currency<span style="color: red; font-size: 20px;"> *</span>
										</label>
									</div>
									<div class="col-sm-3">
										<select id="settlement_currency" name="settlement_currency" th:if="${formmode}=='addRate'" onchange="updateRate()" class="form-control form-control-sm" style="width: 100%">
											<option>Select</option>
											<option value="INR">INR</option>
											<option value="EUR">EUR</option>
											<option value="USD">USD</option>
											<option value="AUD">AUD</option>
											<option value="RUB">RUB</option>
										</select> <input type="text" id="settlement_currency" th:if="${formmode}=='viewRate'" name="settlement_currency" class="form-control form-control-sm" th:value="${Rate.settlement_currency}" disabled> <select
											id="settlement_currency" name="settlement_currency" th:if="${formmode}=='editRate'" onchange="updateRate()" class="form-control form-control-sm" style="width: 100%">
											<option>Select</option>
											<option th:selected="${Rate.settlement_currency == 'INR'}" value="INR">INR</option>
											<option th:selected="${Rate.settlement_currency == 'EUR'}" value="EUR">EUR</option>
											<option th:selected="${Rate.settlement_currency == 'USD'}" value="USD">USD</option>
											<option th:selected="${Rate.settlement_currency == 'AUD'}" value="AUD">AUD</option>
											<option th:selected="${Rate.settlement_currency == 'RUB'}" value="RUB">RUB</option>
										</select>
										<!--
										 <input type="text" id="settlement_currency"
											th:if="${formmode}=='editRate'" name="settlement_currency"
											class="form-control form-control-sm" onchange="updateRate()"
											th:value="${Rate.settlement_currency}">-->
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="rate" style="font-size: 14px;">Rate <span style="color: red; font-size: 20px;"> *</span></label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="rate" name="rate" th:if="${formmode}=='addRate'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" readonly> <input type="text"
											id="rate" name="rate" th:if="${formmode}=='viewRate'" th:value="${Rate.rate}" class="form-control form-control-sm" readonly> <input type="text" id="rate" name="rate" th:if="${formmode}=='editRate'"
											th:value="${Rate.rate}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" readonly>
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="effective_date" style="font-size: 14px;">Effective Date<span style="color: red; font-size: 20px;"> *</span>
										</label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="effective_date" name="effective_date" th:if="${formmode}=='addRate'" readonly class="form-control form-control-sm"> <input type="text" id="" th:if="${formmode}=='viewRate'"
											name="effective_date" class="form-control form-control-sm" th:value="${#dates.format(Rate.effective_date, 'dd-MM-yyyy')}" disabled> <input type="text" id="effective_date"
											th:if="${formmode}=='editRate'" name="effective_date" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" readonly
											th:value="${#dates.format(Rate.effective_date, 'dd-MM-yyyy')}">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="audit_date" style="font-size: 14px;">Current Date<span style="color: red; font-size: 20px;"> *</span>
										</label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="audit_date" name="audit_date" th:if="${formmode}=='addRate'" readonly class="form-control form-control-sm"> <input type="text" id="audit_date" th:if="${formmode}=='viewRate'"
											name="audit_date" class="form-control form-control-sm" th:value="${#dates.format(Rate.audit_date, 'dd-MM-yyyy')}" disabled> <input type="text" id="audit_date" th:if="${formmode}=='editRate'"
											name="audit_date" class="form-control form-control-sm" readonly th:value="${#dates.format(Rate.audit_date, 'dd-MM-yyyy')}">
									</div>
								</div>
							</div>
						</div>
						<div class="card-footer text-center mt-3">
							<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="home();">Home</button>
							<button type="button" class="btn btn-sm btn-primary" th:if="${formmode}=='addRate'" data-dismiss="modal" onclick="SubmitRate(this);">Submit</button>
							<button type="button" class="btn btn-sm btn-primary" th:if="${formmode}=='editRate'" data-dismiss="modal" onclick="SubmitRateModi(this);">Submit</button>
							<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="back();">Back</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!------------------------------- CustClick ---------------------------------->

		<div th:if="${formmode}=='CustClick'" class="content card">
			<div class="card-header">
				<div class="d-flex justify-content-between align-items-center">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Customer Transaction</h4>
					<div>
						<label style="font-size: 20px !important">Search Records by Date :</label> <input type="text" class="pl-2" style="height: 30px !important" id="currentDate" onchange="getTransactionRecords();" readonly>
					</div>
				</div>
			</div>
			<div class="card-body p-0">
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>Transaction Date</th>
							<th>Transaction Reference</th>
							<th>User Id</th>
							<th>Unit Id</th>
							<th>Customer Name</th>
							<th>Customer Account</th>
							<th>Currency</th>
							<th>Amount</th>
							<th>Status</th>
							<th>Remarks</th>
							<th>Select</th>
						</tr>
					</thead>
					<tbody id="transactionBody">
						<tr th:each="profile:${click}">
							<td th:text="${profile.tran_date != null ? #dates.format(profile.tran_date,'dd-MM-yyyy') : ''}"></td>
							<td th:text="${profile.sequence_unique_id !=null ? profile.sequence_unique_id.toUpperCase() : ''}"></td>
							<td th:text="${profile.user_id !=null ? profile.user_id.toUpperCase() : ''}"></td>
							<td th:text="${profile.unit_id !=null ? profile.unit_id.toUpperCase() : ''}"></td>
							<td th:text="${profile.ipsx_account_name !=null ? profile.ipsx_account_name.toUpperCase() : ''}"></td>
							<td th:text="${profile.ipsx_account != null ? profile.ipsx_account.substring(0, 4) + 'XXXXXXX' + profile.ipsx_account.substring(profile.ipsx_account.length() - 3) : ''}"></td>
							<td th:text="${profile.tran_currency !=null ? profile.tran_currency.toUpperCase() : ''}"></td>
							<td style="text-align: right;" th:text="${profile.tran_amount != null ? #numbers.formatDecimal(profile.tran_amount, 0, 'COMMA', 2, 'POINT') : ''}"></td>
							<th:block th:switch="${profile.tran_status}">
								<td th:case="'SUCCESS'" style="color: green">SUCCESS</td>
								<td th:case="'FAILURE'" style="color: red">FAILURE</td>
								<td th:case="*">UNKNOWN STATUS</td>
								<!-- Handle any other cases -->
							</th:block>
							<td th:text="${profile.reversal_remarks !=null ? profile.reversal_remarks.toUpperCase() : ''}"></td>
							<td style="text-align: center;"><input type="radio" id="btnclick" name="btnradio" style="cursor: pointer;" th:attr="data-sequence_unique_id=${profile.sequence_unique_id}" th:id="${profile.sequence_unique_id}"
								onclick="customerTranView(this);"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<div class="content pt-1" th:if="${formmode}=='customerView'">
			<div class="card">
				<div class=" card-header" style="width: 100%;">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.5rem;">Customer Transaction</h4>
					</div>
					<div class="float-right">
						<div class="float-right ml-2">
							<button type="button" class="btn btn-sm btn-primary no-print commonBtnStyle" id="" onclick="miniPrintScrn()">Mini Print</button>
						</div>
						<div class="float-right ">
							<button type="button" class="btn btn-sm btn-primary no-print commonBtnStyle" id="" onclick="PrintScrn()">Print</button>
						</div>
					</div>
				</div>

				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" id="ChargeForm" th:object="${viewcharge}" style="width: 100%; max-width: 500px; margin: 0 auto;">
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="tran_date">Transaction Date</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="" name="tran_date" class="form-control form-control-sm" th:value="${#dates.format(viewcustomer?.tran_date, 'dd-MM-yyyy')}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="sequence_unique_id">Message Id</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="sequence_unique_id" name="sequence_unique_id" class="form-control form-control-sm" th:value="${viewcustomer?.sequence_unique_id}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="merchant_bill_number">Bill Number</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="merchant_bill_number" name="merchant_bill_number" class="form-control form-control-sm" th:value="${viewcustomer?.merchant_bill_number}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="bill_date">Bill Date</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="" name="bill_date" class="form-control form-control-sm" th:value="${#dates.format(viewcustomer?.bill_date, 'dd-MM-yyyy')}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="bill_amount">Bill Amount</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="bill_amount" name="bill_amount" class="form-control form-control-sm" th:value="${viewcustomer?.bill_amount}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="tran_currency">Currency</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="tran_currency" name="tran_currency" class="form-control form-control-sm" th:value="${viewcustomer?.tran_currency}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="reversal_remarks">Remarks</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="reversal_remarks" name="reversal_remarks" class="form-control form-control-sm" th:value="${viewcustomer?.reversal_remarks}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="reversal_date">Reversal Date</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="" name="reversal_date" class="form-control form-control-sm" th:value="${#dates.format(viewcustomer?.reversal_date, 'dd-MM-yyyy')}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="reversal_amount">Reversal Amount</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="reversal_amount" name="reversal_amount" class="form-control form-control-sm" th:value="${viewcustomer?.reversal_amount}" readonly>
							</div>
						</div>

						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="bill_date">Customer Name</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="ipsx_account_name" name="ipsx_account_name" class="form-control form-control-sm" th:value="${viewcustomer?.ipsx_account_name}" readonly>
							</div>
						</div>

						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="tran_currency">Tran Amount</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="tran_amount" name="tran_amount" class="form-control form-control-sm" th:value="${viewcustomer?.tran_amount}" readonly>
							</div>
						</div>

						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="reversal_remarks">Status</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="tran_status" name="tran_status" class="form-control form-control-sm" th:value="${viewcustomer?.tran_status}" readonly>
							</div>
						</div>
						<div class="row align-items-center mb-2">
							<div class="col-sm-4 text-left">
								<label for="reversal_date">Approved User</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="auth_user" name="auth_user" class="form-control form-control-sm" th:value="${viewcustomer?.auth_user}" readonly>
							</div>
						</div>
						<div class="row align-items-center">
							<div class="col-sm-4 text-left">
								<label for="reversal_amount">Approved date</label>
							</div>
							<div class="col-sm-6">
								<input type="text" id="auth_time" name="auth_time" class="form-control form-control-sm" th:value="${#dates.format(viewcustomer?.auth_time, 'dd-MM-yyyy')}" readonly>
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm btn-primary" id="btnHome" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm btn-primary" th:if="${reversal_remarks} == 'null'" id="btnRevertTransaction" th:attr="data-sequence_unique_id=${viewcustomer.sequence_unique_id}" data-dismiss="modal"
						onclick="CustomerRevert(this)">Revert</button>
					<button type="button" class="btn btn-sm btn-primary" id="btnBack" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- FeesClick ---------------------------------->

		<div th:if="${formmode}=='FeesClick'" class="content card">
			<div class="card-header">
				<div class="d-flex justify-content-between align-items-center">
					<h4 style="color: white; font-size: 1.5rem;">Fees and Charges</h4>
					<div>
						<label style="font-size: 20px !important">Search Records by Date :</label> <input type="text" class="pl-2" style="height: 30px !important" id="currentDate" onchange="getFeeAndChargesRecords();" readonly>
					</div>
				</div>
			</div>
			<div class="card-body p-0">
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>Merchant Id</th>
							<th>User Id</th>
							<th>Unit Id</th>
							<th>Date</th>
							<th>Message Reference</th>
							<th>Remitter Account</th>
							<th>Transaction Fees</th>
							<th>Applied Flag</th>
							<th>Currency</th>
							<th>Amount</th>
							<th>Select</th>
						</tr>
					</thead>
					<tbody id="transactionBody">
						<tr th:each="FeeCha:${fees}">
							<td th:text="${FeeCha?.merchant_id != null ? FeeCha.merchant_id.toUpperCase() : ''}"></td>
							<td th:text="${FeeCha?.user_id != null ? FeeCha.user_id.toUpperCase() : ''}"></td>
							<td th:text="${FeeCha?.unit_id != null ? FeeCha.unit_id.toUpperCase() : ''}"></td>
							<td th:text="${#dates.format(FeeCha.tran_date,'dd-MM-yyy')}"></td>
							<td th:text="${FeeCha?.sequence_unique_id != null ? FeeCha.sequence_unique_id.toUpperCase() : ''}"></td>
							<td th:text="${FeeCha?.ipsx_account != null ? FeeCha.ipsx_account.substring(0, 4) + 'XXXXXXX' + FeeCha.ipsx_account.substring(FeeCha.ipsx_account.length() - 3) : ''}"></td>
							<td th:text="${#numbers.formatDecimal(FeeCha.conv_fee, 0, 'COMMA', 2, 'POINT')}" style="text-align: right;"></td>
							<td th:text="${FeeCha?.charge_app_flg != null ? FeeCha.charge_app_flg.toUpperCase() : ''}"></td>
							<td th:text="${FeeCha?.tran_currency != null ? FeeCha.tran_currency.toUpperCase() : ''}"></td>
							<td style="text-align: right;" th:text="${#numbers.formatDecimal(FeeCha.tran_amount, 0, 'COMMA', 2, 'POINT')}"></td>
							<td><input type="radio" id="btnclick" name="btnradio" style="cursor: pointer;" th:attr="data-sequence_unique_id=${FeeCha.sequence_unique_id}" th:id="${FeeCha.sequence_unique_id}"
								onclick="listfees(this); openForm();"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm  commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------------------------------- viewfees ---------------------------------->

		<div class="content" th:if="${formmode}=='viewfees'or ${formmode}=='editfees'">
			<div class="card">
				<div class=" card-header" style="width: 100%;">
					<div class="float-left">
						<h4 th:if="${formmode}=='viewfees'" style="color: white; font-size: 1.5rem;">Fees and Charges</h4>
						<h4 th:if="${formmode}=='editfees'" style="color: white; font-size: 1.5rem;">Fees and Charges</h4>
					</div>
					<!-- <div class="float-right">
						<button type="button" th:if="${formmode}=='viewfees'"
							class="btn btn-sm btn-primary" id="feesedit"
							onclick="feesedit();">Edit</button>
					</div> -->
				</div>
				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" th:object="${FeesCharge}" id="FeesForm" name="Feesf" style="width: 100%;">
						<div style="width: 100%;">
							<div style="margin-left: 400px">
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="transaction_date" style="font-size: 14px;">Date </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="tran_date" th:if="${formmode}=='viewfees'" th:value="${#dates.format(FeesCharge.tran_date, 'dd-MM-yyyy')}" class="form-control form-control-sm" name="tran_date" autocomplete="off"
											disabled> <input type="text" id="tran_date" th:if="${formmode}=='editfees'" th:value="${#dates.format(FeesCharge.tran_date, 'dd-MM-yyyy')}" class="form-control form-control-sm" name="tran_date"
											autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="message_ref" style="font-size: 14px;">Message Reference </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="sequence_unique_id" th:if="${formmode}=='viewfees'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${FeesCharge.sequence_unique_id}"
											class="form-control form-control-sm" name="sequence_unique_id" autocomplete="off" disabled> <input type="text" id="sequence_unique_id" th:if="${formmode}=='editfees'"
											th:value="${FeesCharge.sequence_unique_id}" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" name="sequence_unique_id" autocomplete="off" readonly>
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="audit_ref" style="font-size: 14px;">Audit Reference </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="tran_audit_number" th:if="${formmode}=='viewfees'" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" th:value="${FeesCharge.tran_audit_number}"
											class="form-control form-control-sm" name="tran_audit_number" autocomplete="off" disabled> <input type="text" id="tran_audit_number" th:if="${formmode}=='editfees'"
											th:value="${FeesCharge.tran_audit_number}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" name="tran_audit_number" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="bank" style="font-size: 14px;">Bank</label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="initiator_bank" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.initiator_bank}" class="form-control form-control-sm" name="initiator_bank" autocomplete="off" disabled> <input
											type="text" id="initiator_bank" th:if="${formmode}=='editfees'" th:value="${FeesCharge.initiator_bank}" class="form-control form-control-sm" name="initiator_bank" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="remitter_account" style="font-size: 14px;">Remitter Account </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="cim_account" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.cim_account}" class="form-control form-control-sm" name="cim_account" autocomplete="off" disabled> <input
											type="text" id="cim_account" th:if="${formmode}=='editfees'" th:value="${FeesCharge.cim_account}" class="form-control form-control-sm" name="cim_account" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="transaction_fees" style="font-size: 14px;">Transaction Fees </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="conv_fee" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.conv_fee}" class="form-control form-control-sm" name="conv_fee" autocomplete="off" disabled> <input type="text"
											id="conv_fee" th:if="${formmode}=='editfees'" th:value="${FeesCharge.conv_fee}" class="form-control form-control-sm" name="conv_fee" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="applied_flag" style="font-size: 14px;">Applied Flag </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="charge_app_flg" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.charge_app_flg}" class="form-control form-control-sm" name="charge_app_flg" autocomplete="off" disabled> <input
											type="text" id="charge_app_flg" th:if="${formmode}=='editfees'" th:value="${FeesCharge.charge_app_flg}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
											name="charge_app_flg" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="currency" style="font-size: 14px;">Currency </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="tran_currency" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.tran_currency}" class="form-control form-control-sm" name="tran_currency" autocomplete="off" disabled> <input
											type="text" id="tran_currency" th:if="${formmode}=='editfees'" th:value="${FeesCharge.tran_currency}" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
											name="tran_currency" autocomplete="off">
									</div>
								</div>
								<br>
								<div class="row formline">
									<div class="col-sm-3" style="text-align: left">
										<label for="amount" style="font-size: 14px;">Amount </label>
									</div>
									<div class="col-sm-3">
										<input type="text" id="tran_amount" th:if="${formmode}=='viewfees'" th:value="${FeesCharge.tran_amount}" class="form-control form-control-sm" name="tran_amount" autocomplete="off" disabled> <input
											type="text" id="tran_amount" th:if="${formmode}=='editfees'" th:value="${FeesCharge.tran_amount}" class="form-control form-control-sm" name="tran_amount" autocomplete="off">
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" th:if="${formmode}=='editfees'" data-dismiss="modal" onclick="Submitfees(this);">Submit</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- ChargeClick ---------------------------------->

		<div th:if="${formmode}=='ChargeClick'" class="content card">
			<div class="card-header">
				<div class="float-left">
					<h4 style="color: white; font-size: 1.5rem;">Charge Back Transactions</h4>
				</div>
			</div>
			<div>
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>Merchant Id</th>
							<th>Unit Id</th>
							<th>Tran Date</th>
							<th>Bill Date</th>
							<th>Rev Date</th>
							<th>Message Id</th>
							<th>Audit Ref</th>
							<th>Bill Number</th>
							<th>Currency</th>
							<th>Bill Amount</th>
							<th>Rev Amount</th>
							<th>Remarks</th>
							<th>Select</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="charge:${Back}">
							<td th:text="${charge?.merchant_id != null ? charge.merchant_id.toUpperCase() : ''}"></td>
							<td th:text="${charge?.unit_id != null ? charge.unit_id.toUpperCase() : ''}"></td>
							<td style="width: 200px" th:text="${charge.tran_date != null ? #dates.format(charge.tran_date, 'dd-MM-yyyy') : ''}"></td>
							<td style="width: 125px" th:text="${charge.bill_date != null ? #dates.format(charge.bill_date, 'dd-MM-yyyy') : ''}"></td>
							<td style="width: 200px" th:text="${charge.reversal_date != null ? #dates.format(charge.reversal_date, 'dd-MM-yyyy') : ''}"></td>
							<td style="width: 125px" th:text="${charge.sequence_unique_id != null ? charge.sequence_unique_id.toUpperCase() : ''}"></td>
							<td style="width: 200px" th:text="${charge.tran_audit_number != null ? charge.tran_audit_number.toUpperCase() : ''}"></td>
							<td style="width: 150px" th:text="${charge.merchant_bill_number != null ? charge.merchant_bill_number.toUpperCase() : ''}"></td>
							<td style="width: 125px" th:text="${charge.tran_currency != null ? charge.tran_currency.toUpperCase() : ''}"></td>
							<td style="text-align: right;" th:text="${charge.bill_amount != null ? #numbers.formatDecimal(charge.bill_amount, 0, 'COMMA', 2, 'POINT') : ' '}"></td>
							<td style="text-align: right; width: 150px" th:text="${charge.reversal_amount != null ? #numbers.formatDecimal(charge.reversal_amount, 0, 'COMMA', 2, 'POINT') : ' '}"></td>
							<td style="width: 125px" th:text="${charge.reversal_remarks != null ? charge.reversal_remarks.toUpperCase() : ''}"></td>
							<td style="text-align: center;"><input type="radio" id="btnclick" name="btnradio" style="cursor: pointer;" th:attr="data-sequence_unique_id=${charge.sequence_unique_id}" th:id="${charge.sequence_unique_id}"
								onclick="listcharge(this); openForm();"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center" style="margin-top: 30px;">
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------ addCharge ------------>

		<div class="content" th:if="${formmode}=='addCharge'">
			<div class="card">
				<div class=" card-header" style="width: 100%;">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.5rem;">Charge Backs</h4>
					</div>
					<!--<div class="float-right">
						<button type="button" class="btn btn-sm btn-primary" id="" onclick="()">Edit</button>
					</div>-->
				</div>

				<div class="card-body" style="background-color: gainsboro;">
					<form action="#" method="POST" autocomplete="off" id="ChargeForm" style="width: 100%;" th:object="${viewcharge}">
						<div>
							<div class="row formline">
								<div class="col-sm-1"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="tran_date" style="font-size: 14px;">Transaction Date </label>
								</div>
								<div class="col-sm-2" style="text-align: left;">
									<input type="text" id="tran_date" name="tran_date" class="form-control form-control-sm" th:value="${#dates.format(viewcharge?.tran_date, 'dd-MM-yyyy')}" readonly>
								</div>
								<div class="col-sm-2"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="message_id" style="font-size: 14px;">Message Id </label>
								</div>
								<div class="col-sm-2">
									<input type="text" id="sequence_unique_id" name="sequence_unique_id" class="form-control form-control-sm" th:value="${viewcharge?.sequence_unique_id}" readonly>
								</div>
								<div class="col-sm-1"></div>
							</div>
							<br>
							<div class="row formline">
								<div class="col-sm-1"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="audit_ref" style="font-size: 14px;">Audit Reference </label>
								</div>
								<div class="col-sm-2" style="text-align: left;">
									<input type="text" id="tran_audit_number" name="tran_audit_number" class="form-control form-control-sm" th:value="${viewcharge?.tran_audit_number}" readonly>
								</div>
								<div class="col-sm-2"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="merchant_bill_number" style="font-size: 14px;"> Bill Number </label>
								</div>
								<div class="col-sm-2">
									<input type="text" id="merchant_bill_number" name="merchant_bill_number" class="form-control form-control-sm" th:value="${viewcharge?.merchant_bill_number}" readonly>
								</div>
								<div class="col-sm-1"></div>
							</div>
							<br>
							<div class="row formline">
								<div class="col-sm-1"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="bill_date" style="font-size: 14px;">Bill Date </label>
								</div>
								<div class="col-sm-2" style="text-align: left;">
									<input type="text" id="bill_date" name="bill_date" class="form-control form-control-sm" th:value="${#dates.format(viewcharge?.bill_date, 'dd-MM-yyyy')}" readonly>
								</div>
								<div class="col-sm-2"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="bill_amount" style="font-size: 14px;">Bill Amount </label>
								</div>
								<div class="col-sm-2">
									<input type="text" id="bill_amount" name="bill_amount" class="form-control form-control-sm" th:value="${viewcharge?.bill_amount}" readonly>
								</div>
								<div class="col-sm-1"></div>
							</div>
							<br>
							<div class="row formline">
								<div class="col-sm-1"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="tran_currency" style="font-size: 14px;">Currency </label>
								</div>
								<div class="col-sm-2" style="text-align: left;">
									<input type="text" id="tran_currency" name="tran_currency" class="form-control form-control-sm" th:value="${viewcharge?.tran_currency}" readonly>
								</div>
								<div class="col-sm-2"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="reversal_remarks" style="font-size: 14px;">Remarks </label>
								</div>
								<div class="col-sm-2">
									<input type="text" id="reversal_remarks" name="reversal_remarks" class="form-control form-control-sm" th:value="${viewcharge?.reversal_remarks}" readonly>
								</div>
								<div class="col-sm-1"></div>
							</div>
							<br>
							<div class="row formline">
								<div class="col-sm-1"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="currency" style="font-size: 14px;">Reversal Date </label>
								</div>
								<div class="col-sm-2" style="text-align: left;">
									<input type="text" id="reversal_date" name="reversal_date" class="form-control form-control-sm" th:value="${#dates.format(viewcharge?.reversal_date, 'dd-MM-yyyy')}" readonly>
								</div>
								<div class="col-sm-2"></div>
								<div class="col-sm-2" style="text-align: left;">
									<label for="remarks" style="font-size: 14px;">Reversal Amount </label>
								</div>
								<div class="col-sm-2">
									<input type="text" id="reversal_amount" name="reversal_amount" class="form-control form-control-sm" th:value="${viewcharge?.reversal_amount}" readonly>
								</div>
								<div class="col-sm-1"></div>
							</div>

						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="handleRevert()">Revert</button>
					<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>


		</div>

		<!------------------------------- AlertClick ---------------------------------->

		<div th:if="${formmode}=='AlertClick'" class="content card">
			<div class="card-header text-left">
				<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Alert & Notification</h4>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-sm-2"></div>
					<div class="col-sm-3">
						<div class="card card1" onclick="alertc()" style="width: 270px; height: 270px; padding-left: 50px; padding-top: 20px; border-color: transparent;">
							<img th:src=@{/images/alert.jpg} id="alertStat" style="width: 170px; height: 170px" alt="Bornfire">
							<div class="container">
								<label style="margin-left: -50px; margin-top: 40px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Alert</label>
							</div>
						</div>
					</div>
					<div class="col-sm-2"></div>
					<div class="col-sm-3">
						<div class="card card1" onclick="notification()" style="width: 270px; height: 270px; padding-left: 50px; padding-top: 20px; border-color: transparent;">
							<img th:src=@{/images/notifi.png} id="notifi" style="width: 170px; height: 170px; border-radius: 50%" alt="Bornfire">
							<div class="container">
								<label style="margin-left: -40px; margin-top: 40px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Notification</label>
							</div>
						</div>
					</div>
					<div class="col-sm-2"></div>
				</div>
			</div>

			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm btn-primary commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm btn-primary commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!-------------alert ---------->

		<div th:if="${formmode}=='alert'" class="content card">
			<div class="card-header">
				<div class="float-left">
					<h4 style="color: white; font-size: 1.5rem;">Alerts List</h4>
				</div>
			</div>
			<div class="card-body p-0">
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>Alert ID</th>
							<th>Alert Type</th>
							<th>Alert Message</th>
							<th>Screen Name</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="Alert:${alt}">
							<td th:text="${Alert.alertId}"></td>
							<td th:text="${Alert.alertType}"></td>
							<td th:text="${Alert.alertMessage}"></td>
							<td th:text="${Alert.screenName}"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------------ notification -------------->

		<div th:if="${formmode}=='notification'" class="content card">
			<div class="card-header">
				<div class="d-flex justify-content-between align-items-center">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Notification</h4>
					<button type="button" th:if="${formmode}=='notification'" class="btn btn-sm commonBtnStyle" id="NotificateAdd" onclick="NotifiAdd();">Add</button>
				</div>
			</div>
			<div class="card-body p-0">
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>SRL</th>
							<th>Date</th>
							<th>Notification Event</th>
							<th>Tran Category</th>
							<th>Channel</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="Notifi:${noti}">
							<td th:text="${Notifi?.record_srl_no != null ? Notifi.record_srl_no : ''}"></td>
							<td th:text="${#dates.format(Notifi.record_date,'dd-MM-yyy')}"></td>
							<td th:text="${Notifi?.notification_event_desc != null ? Notifi.notification_event_desc.toUpperCase() : ''}"></td>
							<td th:text="${Notifi?.tran_category != null ? Notifi.tran_category.toUpperCase() : ''}"></td>
							<td th:text="${Notifi?.channel != null ? Notifi.channel.toUpperCase() : ''}"></td>

						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<div class="content" th:if="${formmode}=='NotifiAdd'">
			<div class="card">
				<div class=" card-header text-left">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Notification Details - Add</h4>
				</div>

				<div class="card-body p-0">
					<form action="#" method="POST" autocomplete="off" th:object="${Service}" id="NotificationForm">
						<div class="row formline pt-2">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Record Srl No<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="record_srl_no" name="record_srl_no" onkeyup="this.value = this.value.toUpperCase();handleInForId(this)" th:value="${NPID}" class="form-control form-control-sm" readonly>
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Record Date<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="record_date" name="record_date" class="form-control form-control-sm" readonly>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>

						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Event Number<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="notification_event_no" name="notification_event_no" style="background: transparent;" class="form-control form-control-sm" required>
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Tran Category<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="tran_category" name="tran_category" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" required>
							</div>
							<div class="col-sm-1"></div>
						</div>

						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Notification Limit<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="notification_limit" style="background: transparent;" name="notification_limit" class="form-control form-control-sm" />
							</div>
							<div class="col-sm-2 text-left"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Event Description<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="notification_event_desc" name="notification_event_desc" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm"
									required>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Notification User 1<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="notification_user_1" name="notification_user_1" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Mobile 1<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="notification_mobile_1" name="notification_mobile_1" style="background: transparent;" onkeyup="validateMobileNumber(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Notification User 2<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="notification_user_2" name="notification_user_2" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Mobile 2<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="notification_mobile_2" name="notification_mobile_2" style="background: transparent;" onkeyup="validateMobileNumber(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Notification User 3<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="notification_user_3" name="notification_user_3" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Mobile 3<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="notification_mobile_3" name="notification_mobile_3" style="background: transparent;" onkeyup="validateMobileNumber(this)" class="form-control form-control-sm">
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Email Id 1<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="email" id="notification_email_1" name="notification_email_1" style="background: transparent;" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">SMS<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<select class="form-control form-control-sm" name="notification_sms_flg" id="notification_sms_flg" style="width: 100%;">
									<option value="N">NO</option>
									<option value="Y">YES</option>
								</select>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Email Id 2<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="email" id="notification_email_2" name="notification_email_2" style="background: transparent;" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Email<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<select class="form-control form-control-sm" name="notification_email_flg" id="notification_email_flg" style="width: 100%;">
									<option value="N">NO</option>
									<option value="Y">YES</option>
								</select>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Email Id 3<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="email" id="notification_email_3" name="notification_email_3" style="background: transparent;" class="form-control form-control-sm">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Alert<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<select class="form-control form-control-sm" name="alert_flg" id="alert_flg" style="width: 100%;">
									<option value="N">NO</option>
									<option value="Y">YES</option>

								</select>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">From Date<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="start_date" name="start_date" onkeyup="validateMobileNumber(this)" style="background: transparent;" class="form-control form-control-sm" required readonly>
							</div>

							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">To Date<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="end_date" name="end_date" style="background: transparent;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm" required readonly> <input
									type="text" id="merchantid" name="merchantid" hidden="true" th:value="${merUserId}" class="form-control form-control-sm" required readonly> <input type="text" id="unitid" name="unitid" hidden="true"
									th:value="${unitid}" class="form-control form-control-sm" required readonly>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Frequency<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="frequency" name="frequency" style="background: transparent;" class="form-control form-control-sm" required>
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="SubmitNotification(this);">Submit</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- ServClick ---------------------------------->

		<div th:if="${formmode}=='ServClick'" class="content card">
			<div class="card-header">
				<div class="d-flex justify-content-between align-items-center">
					<h4 style="color: white; font-size: 1.5rem; font-weight: bold;">Service Request- History</h4>
					<button type="button" class="btn btn-sm commonBtnStyle" onclick="addService();">Add</button>
				</div>
			</div>
			<div>
				<table class="table table-striped table-bordered  table-hover table-sm" id="usertable">
					<thead>
						<tr>
							<th>Merchant Id</th>
							<th>Request ID</th>
							<th>Request Date</th>
							<th>Status</th>
							<th>Entry User</th>
							<th>Priority</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="request:${Service}">
							<td th:text="${request?.merchant_id != null ? request.merchant_id.toUpperCase() : ''}">Subject</td>
							<td th:text="${request?.request_id != null ? request.request_id.toUpperCase() : ''}">Subject</td>
							<td th:text="${#dates.format(request.request_date,'dd-MM-yyy')}">Date</td>
							<td th:text="${request?.status != null ? request.status.toUpperCase() : ''}">Subject</td>
							<td th:text="${request?.entry_user != null ? request.entry_user.toUpperCase() : ''}">Description</td>
							<td th:text="${request?.priority != null ? request.priority.toUpperCase() : ''}">Resolution</td>
						</tr>

					</tbody>
				</table>
			</div>

			<div class="card-footer text-center">
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!------ addService ------------>

		<div class="content pt-2" th:if="${formmode}=='addService'">
			<div class="card">
				<div class=" card-header" style="width: 100%;">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.5rem;">Service Request - Add</h4>
					</div>
				</div>

				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" th:object="${Service}" id="ServiceForm">
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Request Id<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="request_id" name="request_id" th:value="${SRID}" onkeyup="this.value = this.value.toUpperCase();handleInForId(this)" class="form-control form-control-sm" required readonly> <input
									type="text" id="unit_id" name="unit_id" th:value="${UNIT_ID}" class="form-control form-control-sm" hidden="true">
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Merchant Id<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="merchant_id" name="merchant_id" th:value="${merUserId}" class="form-control form-control-sm" readonly>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>

						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Request Type<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="request_type" name="request_type" style="color: black;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm bg-transparent" required>
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Request Description<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="request_description" name="request_description" style="color: black;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm bg-transparent"
									required>
							</div>
							<div class="col-sm-1"></div>
						</div>

						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Steps to Reproduce<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="steps_to_reproduce" name="steps_to_reproduce" style="color: black;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm bg-transparent"
									required>
							</div>
							<div class="col-sm-2 text-left"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Error Message<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="error_message" name="error_message" style="color: black;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm bg-transparent" required>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Priority<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<select class="form-control form-control-sm" name="priority" id="priority" style="width: 100%;" required>
									<option value="">SELECT</option>
									<option value="LOW">LOW</option>
									<option value="MEDIUM">MEDIUM</option>
									<option value="HIGH">HIGH</option>
								</select>
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Contact Email<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="email" id="contact_email" name="contact_email" style="color: black;" class="form-control form-control-sm bg-transparent" required>
							</div>
							<div class="col-sm-1"></div>
						</div>
						<br>
						<div class="row formline">
							<div class="col-sm-1"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Contact Phone<span style="color: red; font-size: 20px;">* </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="number" id="contact_phone" name="contact_phone" onkeyup="validateMobileNumber(this)" style="color: black;" class="form-control form-control-sm bg-transparent" required>
							</div>
							<div class="col-sm-2"></div>
							<div class="col-sm-2" style="text-align: left">
								<label for="ticket_date" style="font-size: 14px;">Additional Notes<span style="color: red; font-size: 20px;"> </span>
								</label>
							</div>
							<div class="col-sm-2 text-left">
								<input type="text" id="additional_notes" name="additional_notes" style="color: black;" onkeyup="this.value = this.value.toUpperCase();handleIn(this)" class="form-control form-control-sm bg-transparent">
							</div>
							<div class="col-sm-1"></div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="SubmitService(this);">Submit</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
			<!--<div id="ticker-container">
				<div id="ticker">
					<p style="color: white;">WELCOME TO THE MERCHANT QR CODE
						PAYMENT</p>
					 Add more notification messages here 
				</div>
			</div>-->

		</div>

		<!------------------------------- Merchant QR ---------------------------------->

		<div class="pt-2" th:if="${formmode}=='MerchantQR'">
			<div class="card">
				<div class="card-header">
					<div class="float-left">
						<h4 th:if="${formmode}=='MerchantQR'" style="color: white; font-size: 1.5rem; font-weight: bold;">Merchant QR</h4>
					</div>
				</div>
				<div class="card-body pb-0 pt-0 my-2">
					<div class="row">
						<div class="col-sm-2"></div>
						<div class="col-sm-4">
							<div class="card card1" onclick="StatClick()" style="width: 300px; height: 300px; padding-left: 60px; padding-top: 20px; border-color: transparent; cursor: pointer;">
								<img th:src=@{/images/qr.jpg} id="imggStat" style="width: 193px; height: 193px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -70px; margin-top: 20px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Static QR</label>
								</div>
								<div>
									<input type="text" id="static_QRID" th:value="${session.MER_USER_ID}" style="display: none;" class="form-control form-control-sm" name="static_QRID" autocomplete="off" readonly>
								</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="card card1" onclick="DynamicClick()" style="width: 300px; height: 300px; padding-left: 60px; padding-top: 20px; border-color: transparent; cursor: pointer;">
								<img th:src=@{/images/dynamic.png} id="imggStat" style="width: 193px; height: 193px" alt="Bornfire">
								<div class="container">
									<label style="margin-left: -70px; margin-top: 20px; font-size: 24px !important; font-weight: 700 !important; color: #162b75;">Dynamic QR</label>
								</div>
							</div>
						</div>
						<div class="col-sm-2"></div>
					</div>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- StaticQR ---------------------------------->

		<div th:if="${formmode}=='StaticQR'" class="content">
			<div class="card">
				<div class="card-header">
					<div class="float-left">
						<h4 th:if="${formmode}=='StaticQR'" style="color: white; font-size: 1.6rem; font-weight: bold;">Static QR</h4>
					</div>
				</div>
				<div class="card-body">
					<div style="text-align: center; width: 100%;">
						<h1 style="font-size: 200%">Scan and Pay</h1>
						<br> <br> <img th:src="${qrCodeImage}" alt="QR Code" id="qrCodeImage" style="display: block; margin-left: auto; margin-right: auto; width: 25%; border-radius: 2%"> <br> <br>
						<h1 style="font-size: 200%">Merchant QR Code Payment</h1>
						<br>
					</div>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="downloadQRCodeAsPDF()">Download</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!------------------------------- DynamicQR ---------------------------------->

		<div th:if="${formmode}=='DynamicQR' or ${formmode}=='qr'" class="content pt-3 showDynamicLOAD">
			<div class="card">
				<div class="card-header" th:if="${formmode}=='DynamicQR' or ${formmode}=='qr'">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.6rem; font-weight: bold;">Dynamic QR</h4>
					</div>
				</div>
				<div class="card-body pb-0 mb-">
					<form action="#" method="POST" autocomplete="off" id="QRdynamic">
						<div class="row">
							<div class="col-sm-3"></div>
							<div class="col-sm-6">
								<div class="row">
									<label class="col-sm-5">Bill/Invoice Number<span style="color: red; font-size: 20px;"> *</span></label>

									<div class="col-sm-5 pr-0 pl-0">
										<input class="form-control" type="text" id="bill_number_dy" onkeyup="handleInputUserId(this)" style="background-color: transparent; color: black;" />
										<p id="bill_number_dy_span" style="color: red;"></p>
									</div>
								</div>
								<label></label>
								<div class="row">
									<label class="col-sm-5">Transaction Amount<span style="color: red; font-size: 20px;"> *</span></label>
									<!-- <label class="col-sm-5">BWP</label>  -->
									<div class="col-sm-5 pr-0 pl-0">
										<input class="form-control" type="number" id="tran_amt_dy" onkeyup="isValidBigDecimal(this)" placeholder="e.g., 23.43" style="background-color: transparent; color: black;" />
										<p id="tran_amt_dy_span" style="color: red;"></p>
									</div>

								</div>
								<label></label>
								<div class="row">
									<label class="col-sm-5">Currency<span style="color: red; font-size: 20px;"> </span></label>
									<!-- <label class="col-sm-5">BWP</label>  -->
									<input class="form-control col-sm-5" type="text" style="background-color: transparent; color: black;" id="currency_cod" value="BWP" readonly />
								</div>
							</div>
							<div class="col-sm-3"></div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="generateDynamicQRCode()">Generate QR Code</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<div class="content showDynamicQRCode" style="display: none">
			<div class="card">
				<div class="card-header">
					<div class="d-flex justify-content-between align-items-center">
						<h4 style="color: white; font-size: 1.6rem; font-weight: bold;">Dynamic QR</h4>
						<div class="timer" id="qrTimer" style="text-align: center; font-size: 1.2rem; margin-top: 10px;">
							QR Code expires in: <span id="timerDisplay">02:00</span>
						</div>
					</div>
				</div>
				<div class="card-body pb-0 mb-0">
					<div style="text-align: center; width: 100%;">
						<h1 style="font-size: 35px">Scan and Pay</h1>
						<img th:src="${qrCodeImage}" alt="QR Code" id="qrCodeImage" style="display: block; margin-left: auto; margin-right: auto; width: 25%; border-radius: 2%">
						<h1 style="font-size: 35px">Merchant QR Code Payment</h1>
					</div>
				</div>
				<div class="card-footer text-center mt-2">
					<button type="button" class="btn btn-sm btn-primary commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm btn-primary commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!---------------------------------- Customer QR Code ---------------------------------->

		<div th:if="${formmode}=='CustomerQRStat'" id="hideAfterSuccess" class="pt-3">
			<div class="card">
				<div class="card-header">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.5rem;">Scan Customer QR</h4>
					</div>
				</div>
				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" id="scannedqrformStat">
						<div class="row formline" style="margin-top: 20px">
							<div>
								<label for="scan_val" style="font-size: 14px; margin-left: 500px;">Scanned value<span style="color: red; font-size: 20px;"> *</span>
								</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="scan_val" name="scan_val" style="margin-left: 50px; background: transparent; color: black; height: 35px; font-size: 20px;" class="form-control form-control-sm" required>
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center" style="margin-top: 15px;">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" hidden="true" data-dismiss="modal" onclick="getCustomerQrInformation()">Submit</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!-- Customer Information -->

		<div class="content" id="newRef_hide" style="display: none;">
			<div class="card">
				<div class="card-header">
					<h4 style="color: white; font-size: 1.5rem; text-align: left;">Customer QR</h4>
				</div>
				<div class="card-body">
					<form action="#" method="POST" autocomplete="off" id="qrForm" class="w-100">
						<!-- Hidden Fields for Unit Information -->
						<input type="hidden" id="Unit_ID" name="Unit-ID" th:value="${UNITID}" /> <input type="hidden" id="Unit_Name" name="Unit-Name" th:value="${UNITNAME}" />

						<!-- Hidden Payload Format Information -->
						<div class="row formline" hidden="true">
							<div class="col-sm-2 text-left">
								<label for="payloadFormatIndiator">Payload Format Indicator</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="payloadFormatIndiator" name="payload_format_indicator" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="pointOfInitiationFormat">POI Method</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="pointOfInitiationFormat" name="poi_method" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>

						<!-- Hidden Global Unique ID Information -->
						<div class="row formline" hidden="true">
							<div class="col-sm-2 text-left">
								<label for="globalID">Global Unique Id</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="globalID" name="global_unique_id" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="payeeParticipantCode">Payee Participant Code</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="payeeParticipantCode" name="payee_participant_code" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>

						<!-- Customer Details -->
						<div class="row formline">
							<div class="col-sm-2 text-left">
								<label for="customerId">Customer ID</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="customerId" name="customer_id" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="customerName">Customer Name</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="customerName" name="customer_name" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>

						<!-- Transaction Details -->
						<div class="row formline mt-2">
							<div class="col-sm-2 text-left">
								<label for="currency">Transaction Currency</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="currency" name="currency" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="trAmt">Transaction Amount<span style="color: red;">*</span></label>
							</div>
							<div class="col-sm-3">
								<input type="number" id="trAmt" name="customer_transaction_amt" style="color: black;" required class="form-control form-control-sm bg-transparent" autocomplete="off">
							</div>
						</div>

						<!-- Location and Bill Details -->
						<div class="row formline mt-2">
							<div class="col-sm-2 text-left">
								<label for="countryCode">Country</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="countryCode" name="country_code" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="city">City</label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="city" name="city" readonly class="form-control form-control-sm" autocomplete="off">
							</div>
						</div>

						<!-- Bill and Remarks -->
						<div class="row formline mt-2">
							<div class="col-sm-2 text-left">
								<label for="billNumber">Bill Number<span style="color: red;">*</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="billNumber" name="customer_bill_number" style="color: black;" required class="form-control form-control-sm bg-transparent" autocomplete="off">
							</div>
							<div class="col-sm-2 text-left">
								<label for="purpose_of_tran">Remarks<span style="color: red;">*</span></label>
							</div>
							<div class="col-sm-3">
								<input type="text" id="purpose_of_tran" name="purpose_of_tran" required class="form-control form-control-sm bg-transparent" autocomplete="off" style="color: black;"
									onkeyup="this.value = this.value.toUpperCase();" maxlength="10">
							</div>
						</div>
					</form>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="home()">Home</button>
					<button type="button" class="btn btn-sm commonBtnStyle mr-2" data-dismiss="modal" onclick="initateCustomerPayment()">Initiate</button>
					<button type="button" class="btn btn-sm commonBtnStyle" data-dismiss="modal" onclick="back()">Back</button>
				</div>
			</div>
		</div>

		<div th:if="${formmode}=='TransDetails'">
			<div class="card">
				<div class="card-header">
					<div class="d-flex justify-content-between align-items-center">
						<h4 style="color: white; font-size: 1.5rem;">Transaction Details</h4>
						<div>
							<label style="font-size: 20px !important">Search Records by Date :</label> <input type="text" class="pl-2" style="height: 30px !important" id="currentDate" onchange="getTransactionDetailRecords();" readonly>
						</div>
					</div>
				</div>
				<div>
					<div style="width: 100%;">
						<div>
							<table class="table table-striped table-bordered table-hover table-sm" id="usertable">
								<thead>
									<tr>
										<th>Transaction Reference</th>
										<th>Transaction Date</th>
										<th>User Id</th>
										<th>Unit Id</th>
										<th>Customer Name</th>
										<th>Customer Account</th>
										<th>Amount</th>
										<th>Status</th>
										<th>Select</th>
									</tr>
								</thead>
								<tbody id="transactionBody">
									<tr th:each="details:${Trans}">
										<td th:text="${details?.master_ref_id != null ? details.master_ref_id.toUpperCase() : ''}"></td>
										<td th:text="${details?.tran_date !=null ? #dates.format(details.tran_date,'dd-MM-yyy') :''}"></td>
										<td th:text="${details?.user_id != null ? details.user_id.toUpperCase() : ''}"></td>
										<td th:text="${details?.unit_id != null ? details.unit_id.toUpperCase() : ''}"></td>
										<td th:text="${details?.ipsx_account_name != null ? details.ipsx_account_name.toUpperCase() : ''}"></td>
										<td th:text="${details?.ipsx_account != null ? details.ipsx_account.substring(0, 4) + 'XXXXXXX' + details.ipsx_account.substring(details.ipsx_account.length() - 3) : ''}"></td>
										<td th:text="${details?.tran_amount != null ? #numbers.formatDecimal(details?.tran_amount, 0, 'COMMA', 2, 'POINT') : ''}"></td>
										<td th:text="${details?.tran_status != null ? details.tran_status.toUpperCase() : ''}"></td>
										<td style="text-align: center;"><input type="radio" id="btnclick" name="btnradio" style="cursor: pointer;" th:attr="data-sequence_unique_id=${details.sequence_unique_id}"
											th:id="${details.sequence_unique_id}" onclick="customerTranView(this);"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="card-footer text-center">
					<button type="button" class="btn btn-sm btn-primary" id="btnHome" data-dismiss="modal" onclick="home();">Home</button>
					<button type="button" class="btn btn-sm btn-primary" id="btnBack" data-dismiss="modal" onclick="back();">Back</button>
				</div>
			</div>
		</div>

		<!----------------------------------------------Dynamic QR Show page---------------------------------->

		<div th:if="${formmode}=='generateQr'" class="content">
			<div class="card" style="margin-left: 370px">
				<div class="card-header">
					<div class="float-left">
						<h4 style="color: white; font-size: 1.5rem;">Dynamic QR</h4>
					</div>
				</div>

				<div class="card-body" style="background-color: gainsboro;">
					<img id="qrCodeImage1" th:src="${qrCodeUrl}" alt="QR Code" style="border-radius: 20%">
				</div>
				<div class="text-center" style="margin-top: 30px; margin-bottom: 20px">
					<button type="button" class="btn btn-sm btn-primary" style="width: 250px; height: 50px; font-size: 20px" data-dismiss="modal" onclick="downloadQRCodeAsPDF1();">Download</button>
				</div>
			</div>
			<div class="card-footer text-center" style="margin-top: 30px; margin-left: 370px; width: 81%">
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="home();">Home</button>
				<button type="button" class="btn btn-sm btn-primary" data-dismiss="modal" onclick="back();">Back</button>
			</div>
		</div>

		<!-- Modal -->

		<div class="modal" id="myModalpopup">
			<div class="modal-dialog">
				<div class="modal-content">

					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">Wrong Submition</h4>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<!-- Modal Body -->
					<div class="modal-body">Transaction Amount Should be filled and cannot be 0</div>

					<!-- Modal Footer -->
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>

				</div>
			</div>
		</div>

		<div class="modal" id="myModalpopup1">
			<div class="modal-dialog">
				<div class="modal-content">


					<div class="modal" id="myModalpopup1">
						<div class="modal-dialog">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title">Wrong Submition</h4>
									<button type="button" class="close" data-dismiss="modal">&times;</button>
								</div>

								<!-- Modal Body -->
								<div class="modal-body">BILL Amount Should be filled</div>

								<!-- Modal Footer -->
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								</div>

							</div>
						</div>
					</div>


					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">Wrong Submition</h4>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<!-- Modal Body -->
					<div class="modal-body">BILL Amount Should be filled</div>

					<!-- Modal Footer -->
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>

				</div>
			</div>
		</div>

		<!-- modelpopup -->

		<div class="modal fade" id="alert">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel" style="text-align: center; color: white;">BANK OF BARODA (BOTSWANA) LTD</div>
					</div>
					<div class="modal-body" style="text-align: center; background-color: #c6ccd2">
						<p style="color: #000;" id="alertmsgm"></p>
						<button type="button" class="btn btn-primary" onclick="back();" th:att>Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="alert1">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel" style="text-align: center; color: white;">BANK OF BARODA (BOTSWANA) LTD</div>
					</div>
					<div class="modal-body" style="text-align: center; background-color: #c6ccd2">
						<p style="color: #000;" id="alertmsgm1"></p>
						<!-- Use data-bs-dismiss="modal" to close the modal -->
						<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="myModalpopup11" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel" style="text-align: center; color: white;">BANK OF BARODA (BOTSWANA) LTD</div>
					</div>
					<div class="modal-body" style="text-align: center; background-color: #c6ccd2">
						<!-- Add content here if needed -->
					</div>
					<div class="modal-footer" style="background-color: #c6ccd2; border-top: none; text-align: center;">
						<button type="button" class="btn btn-primary" data-dismiss="modal" style="margin-right: 45%;">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="responseModal" tabindex="-1" role="dialog" aria-labelledby="responseModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="responseModalLabel">BANK OF BARODA (BOTSWANA) LTD</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body" id="modalBody">
						<!-- Response message will be inserted here -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">CLOSE</button>
					</div>
				</div>
			</div>
		</div>

		<!-- New Model Box -->

		<div class="modal fade" id="qrExpiredModal" tabindex="-1" style="background: #000000b0;" role="dialog" aria-labelledby="qrExpiredModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div style="background-color: #f26223; font-weight: 700; font-size: 20px;">
						<h4 style="color: white; padding: 13px;">BANK OF BARODA (BOTSWANA) LTD</h4>
					</div>
					<h5 style="font-size: 17px; color: black; padding: 15px;">The QR code is expired. Do you want to make a new QR code?</h5>
					<div style="padding: 10px; text-align: center;">
						<button type="button" class="btn btn-secondary" style="font-size: 16px" data-dismiss="modal" onclick="back()">Cancel</button>
						<button type="button" class="btn btn-danger" style="font-size: 16px" onclick="refreshPage()">Yes</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="modalPopupNew" data-backdrop="static" data-keyboard="false" style="background: #000000b0;">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<h3 class="text-center p-2 text-white font-weight-bold" style="background: #f26223;">BANK OF BARODA (BOTSWANA) LTD</h3>
					<h4 class="modal-body text-center font-weight-bold" style="color: black !important; font-size: 19px"></h4>
					<div class="text-center">
						<button type="button" class="btn mb-2" style="width: 16%; background: #f26223; font-size: 17px;" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="myModalpopup2" data-backdrop="static" data-keyboard="false" style="background: #000000b0;">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<h3 class="text-center p-2 text-white font-weight-bold" style="background: #f26223;">BANK OF BARODA (BOTSWANA) LTD</h3>
					<h4 class="modal-body text-center font-weight-bold" style="color: black !important; font-size: 19px"></h4>
					<div class="text-center">
						<button type="button" class="btn mb-2" style="width: 16%; background: #f26223; font-size: 17px;" data-dismiss="modal" onclick="back()">Close</button>
					</div>
				</div>
			</div>
		</div>

	</div>
</body>
<script type="text/javascript">

	function AdmClick(a) {
		location.href = './merchantOperation?formmode=Admin';
	}
	function QRClick() {
		location.href = './merchantOperation?formmode=MerchantQR';
	}
	function CustomerClick() {
		location.href = './merchantOperation?formmode=CustomerQRStat';
	}

	function StatClick() {
		var merchantId = document.getElementById('static_QRID').value;
		location.href = './staticQRCodeGenarate?formmode=StaticQR&merchantId=' + merchantId;
	}

	function TransClick() {
		location.href = './merchantOperation?formmode=TransDetails';
	}

	function DynamicClick() {
		location.href = './merchantOperation?formmode=DynamicQR';
	}

	function UserManClick(a) {
		location.href = './merchantOperation?formmode=UserManClick';
	}

	function DeviceManClick() {
		location.href = './merchantOperation?formmode=DeviceManClick';
	}
	function RateClick() {
		alert("This Screen For Future Use");
	}

	function CustClick() {
		location.href = './merchantOperation?formmode=CustClick';
	}

	function FeesClick() {
		location.href = './merchantOperation?formmode=FeesClick';
	}

	/*  function ChargeClick() {
		location.href = './merchantOperation?formmode=ChargeClick';
	}  */
	function ChargeClick() {
		location.href = './pendingChargeBackTransaction';
	}

	function AlertClick() {
		location.href = './merchantOperation?formmode=AlertClick';
	}

	function ServClick() {
		location.href = './merchantOperation?formmode=ServClick';
	}

	function alertc() {
		location.href = './merchantOperation?formmode=alert';
	}

	function notification() {
		location.href = './merchantOperation?formmode=notification';
	}
</script>
<script>
	function addRate() {
		location.href = './merchantOperation?formmode=addRate';
	}
	function addService() {
		location.href = './merchantOperation?formmode=addService';
	}
	function addCharge() {
		location.href = './merchantOperation?formmode=addCharge';
	}
	function SubDynam() {
		var scan_val = document.getElementById('scan_val').value;
		$.ajax({
			url: './scannerqrDynam',
			data: $("#scannedqrformDynam").serialize(),
			type: 'POST',
			success: function (data) {
			}
		});
		location.href = './merchantOperation?formmode=CustSubQRDynam';

	}

	// Customer Payment Initiate

	document.getElementById("scannedqrformStat").addEventListener("submit", function (event) {
		event.preventDefault();
		getCustomerQrInformation();
	});

	function getCustomerQrInformation() {
		if ($("#scannedqrformStat").valid()) {
			var scan_val = document.getElementById('scan_val').value;
			var formData = {
				qrCode: scan_val
			};
			$.ajax({
				url: './getCustomerDataUsingSacnValue',
				data: JSON.stringify(formData),
				type: 'POST',
				contentType: 'application/json',
				success: function (data) {
					// Bind Information
					var PayloadFormatIndiatorValue = data.payloadFormatIndiator != null ? data.payloadFormatIndiator : '';
					var PointOfInitiationFormatvalue = data.pointOfInitiationFormat != null ? data.pointOfInitiationFormat : '';
					var Currencyvalue = data.currency != null ? data.currency : 'BWP';
					var trAmt = data.trAmt != null ? data.trAmt : '';
					var City = data.city != null ? data.city : '';
					var globalId = '';
					var participantCode = '';
					var customerId = '';

					if (data.payeeAccountInformation != null) {
						globalId = data.payeeAccountInformation.globalID !== null ? data.payeeAccountInformation.globalID : '';
						participantCode = data.payeeAccountInformation.payeeParticipantCode != null ? data.payeeAccountInformation.payeeParticipantCode : '';
						customerId = data.payeeAccountInformation.customerID != null ? data.payeeAccountInformation.customerID : '';
					}
					var billNumber = '';
					var mobileNumber = '';
					if (data.additionalDataInformation != null) {
						billNumber = data.additionalDataInformation.billNumber != null ? data.additionalDataInformation.billNumber : '';
						mobileNumber = data.additionalDataInformation.mobileNumber != null ? data.additionalDataInformation.mobileNumber : '';
					}
					var customerName = data.customerName != null ? data.customerName : '';
					var countryCode = 'Botswana';

					$("#payloadFormatIndiator").val(PayloadFormatIndiatorValue);
					$("#pointOfInitiationFormat").val(PointOfInitiationFormatvalue);
					$("#billNumber").val(billNumber);
					$("#globalID").val(globalId);
					$("#payeeParticipantCode").val(participantCode);
					$("#currency").val(Currencyvalue);
					$("#trAmt").val(trAmt);
					$("#countryCode").val(countryCode);
					$("#city").val(City);
					$("#customerId").val(customerId);
					$("#mobileNumber").val(mobileNumber);
					$("#customerName").val(customerName);

					$("#hideAfterSuccess").css("display", "none");
					$("#newRef_hide").css("display", "block");
				},
				error: function (xhr, status, error) {
					console.error(xhr, status, error);
				}
			});
		}
	}

	function initateCustomerPayment() {
		if ($("#qrForm").valid()) {
			var tran_amt = document.getElementById('trAmt').value;
			var billNumber = document.getElementById('billNumber').value;

			if (tran_amt === "" || parseFloat(tran_amt) === 0 || tran_amt === null) {
				$('#myModalpopup').modal('show');
				return false;
			}
			if (billNumber === "" || billNumber === null) {
				$('#myModalpopup1').modal('show');
				return false;
			}
			var unitId = document.getElementById('Unit_ID').value;
			var unitName = document.getElementById('Unit_Name').value;
			var formattedTranAmt = parseFloat(tran_amt).toFixed(2);

			// Collect form data
			var formData = {
				'Unit-ID': unitId,
				'Unit-Name': unitName,
				'trAmt': formattedTranAmt,
				'billNumber': billNumber
			};

			// Add the rest of the form data
			$("#qrForm").serializeArray().forEach(function (item) {
				formData[item.name] = item.value;
			});
			// AJAX call to submit the data
			$.ajax({
				url: './customerPaymentInitiate',
				data: JSON.stringify(formData),
				type: 'POST',
				contentType: 'application/json',
				headers: {
					'Unit-ID': unitId,
					'Unit-Name': unitName
				},
				success: function (data) {
					$('#myModalpopup2').modal("toggle");
	                $('#myModalpopup2 .modal-body').text("Customer transaction has been initiated successfully.");
				},
				error: function (xhr, status, error) {
					var response;
					var contentType = xhr.getResponseHeader("content-type") || "";
					if (contentType.indexOf("application/json") !== -1) {
						response = JSON.parse(xhr.responseText);
					} else {
						response = { status: 'unknown', error: xhr.responseText };
					}
					var errorMessage = 'Error: ' + response.error + ' (Status: ' + status + ')';
					$('#myModalpopup2').modal("toggle");
	                $('#myModalpopup2 .modal-body').text('Status: ' + response.status + ' Error: ' + response.error);
					console.error(xhr, status, error);
				}
			});
		}
	}

	function initatess() {
		var city = document.getElementById('TrAmt').value;

		var formData = {
			city: city
		};

		$.ajax({
			url: '/merchantreaderinitiate', // URL is relative to the base URL
			data: JSON.stringify(formData),
			//data: $("#qrForm").serialize(),
			type: 'POST',
			contentType: 'application/json',
			success: function (data) {
				console.log(data);
			},
			error: function (xhr, status, error) {
				console.error(xhr, status, error);
			}
		});
	}

	function CustomerRevert(a) {
		var message_ref = a.getAttribute("data-sequence_unique_id");
		$.ajax({
			url: './CustomerRevert',
			data: {
				message_ref: message_ref
			},
			type: 'POST',
			success: function (data) {
				// Show success message in modal
				$('#alertmsgm').text(data);
				$('#alert').modal('show');
			},
			error: function (xhr, status, error) {
				// Show error message in modal
				var errorMessage = 'Error: ' + xhr.responseText + ' (Status: ' + status + ')';
				$('#alertmsgm').text(errorMessage);
				$('#alert').modal('show');
				console.error(xhr, status, error);
			}
		});
	}


	function backmethod() {
		$("#hideAfterSuccess").css("display", "block");
		$("#newRef_hide").css("display", "none");
	}

	function Modbtn() {
		location.href = './merchantOperation?formmode=Receipt';
	}
	function hidestat() {
		document.getElementById('scan_stat').style.display = 'block';
	}
	function hidedynam() {
		document.getElementById('scan_dynam').style.display = 'block';
	}
	function qrstat() {
		location.href = './merchantOperation?formmode=CustomerQRStat';
	}
	function qrdynam() {
		location.href = './merchantOperation?formmode=CustomerQRDynam';
	}
</script>
<script>
	function SubmitRate(a) {
		var srl = document.getElementById('billing_currency').value;
		$.ajax({
			url: './RateMaintenance',
			data: $("#RateForm").serialize(),
			type: 'POST',
			success: function (data) {
				// Create a modal with success message and close button
				var modalContent = '<div class="modal" id="successRateModal">';
				modalContent += '<div class="modal-dialog modal-dialog-centered">';
				modalContent += '<div class="modal-content">';
				modalContent += '<div class="modal-header">';
				modalContent += '<p>Added Successfully</p>';
				modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
				modalContent += '</div>';
				modalContent += '<div class="modal-footer">';
				modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';

				// Append the modal to the body
				$('body').append(modalContent);

				// Show the modal
				$('#successRateModal').modal('show');
			}
		});
	}
	function SubmitRateModi(a) {
		var srl = document.getElementById('srl').value;
		$.ajax({
			url: './SubmitRate',
			data: $("#RateForm").serialize(),
			type: 'POST',
			success: function (data) {
				// Create a modal with success message and close button
				var modalContent = '<div class="modal" id="successRateModal">';
				modalContent += '<div class="modal-dialog modal-dialog-centered">';
				modalContent += '<div class="modal-content">';
				modalContent += '<div class="modal-header">';
				modalContent += '<p>Modified Successfully</p>';
				modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
				modalContent += '</div>';
				modalContent += '<div class="modal-footer">';
				modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';

				// Append the modal to the body
				$('body').append(modalContent);

				// Show the modal
				$('#successRateModal').modal('show');
			}
		});
	}
	/* function SubmitCharge(a) {
		var message_id = document.getElementById('sequence_unique_id').value;  
		$.ajax({
			url: './ChargeBacks',
			data: $("#ChargeForm").serialize(),
			type: 'POST',
			success: function (data) {
				// Create a modal with success message and close button
				var modalContent = '<div class="modal" id="successModal">';
				modalContent += '<div class="modal-dialog">';
				modalContent += '<div class="modal-content">';
				modalContent += '<div class="modal-header">';
				modalContent += '<p>Added Successfully</p>';
				modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
				modalContent += '</div>';
				modalContent += '<div class="modal-footer">';
				modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
	
				// Append the modal to the body
				$('body').append(modalContent);
	
				// Show the modal
				$('#successModal').modal('show');
			}
		});
	} */
</script>
<script>




	function showError(element, message) {
		// Check if an error message span already exists, if not create one
		if (!element.next('.error-message').length) {
			// Create a new span element to hold the error message
			var errorSpan = $('<span class="error-message"></span>').text(message);

			// Apply styling for the error message (red color)
			errorSpan.css('color', 'red');

			// Append the error message span after the input field
			element.after(errorSpan);
		}
	}

	function hideError(element) {
		// Remove the error message span if it exists
		element.next('.error-message').remove();
	}
</script>
<script>
	function generateQr() {
		$.ajax({
			url: './generateQr1',
			data: $("#qrForm").serialize(),
			type: 'POST',
			success: function (data) {
				console.log("Response: " + data);
			},
			error: function (error) {
				console.error("Error: " + error.responseText);
				alert("Error saving data");
			}
		});
		location.href = './generateQr?formmode=generateQr';
	}

	function updateRate() {
		var billingCurrency = document.getElementById('billing_currency').value.toUpperCase();
		var settledCurrency = document.getElementById('settlement_currency').value.toUpperCase();
		var exchangeRates = {
			'BWP': 1,
			'INR': 1.87,
			'EUR': 0.021,
			'USD': 0.023,
			'AUD': 0.034,
			'RUB': 1.99
		};
		document.getElementById('rate').value = (exchangeRates[billingCurrency] / exchangeRates[settledCurrency]).toFixed(4);
	}

</script>
<script>
	function Submitdevice(a) {
		var hasError = false;


		if ($("#merchant_user_id").val() === "") {
			showError($("#merchant_user_id"), 'Required');
			hasError = true;
		} else {
			hideError($("#merchant_user_id"));
		}

		if ($("#merchant_name").val() === "") {
			showError($("#merchant_name"), 'Required');
			hasError = true;
		} else {
			hideError($("#merchant_name"));
		}

		if ($("#device_id").val() === "") {
			showError($("#device_id"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_id"));
		}

		if ($("#device_name").val() === "") {
			showError($("#device_name"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_name"));
		}

		if ($("#device_identification_no").val() === "") {
			showError($("#device_identification_no"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_identification_no"));
		}

		if ($("#device_machine_id").val() === "") {
			showError($("#device_machine_id"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_machine_id"));
		}

		if ($("#device_model").val() === "") {
			showError($("#device_model"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_model"));
		}
		if ($("#device_make").val() === "") {
			showError($("#device_make"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_make"));
		}
		if ($("#device_status").val() === "") {
			showError($("#device_status"), 'Required');
			hasError = true;
		} else {
			hideError($("#device_status"));
		}
		if ($("#location").val() === "") {
			showError($("#location"), 'Required');
			hasError = true;
		} else {
			hideError($("#location"));
		}
		if ($("#store_id").val() === "") {
			showError($("#store_id"), 'Required');
			hasError = true;
		} else {
			hideError($("#store_id"));
		}
		if ($("#default_user_id").val() === "") {
			showError($("#default_user_id"), 'Required');
			hasError = true;
		} else {
			hideError($("#default_user_id"));
		}
		if ($("#unitidd").val() === "") {
			showError($("#unitidd"), 'Required');
			hasError = true;
		} else {
			hideError($("#unitidd"));
		}
		if ($("#unittyped").val() === "") {
			showError($("#unittyped"), 'Required');
			hasError = true;
		} else {
			hideError($("#unittyped"));
		}
		if ($("#unitnamed").val() === "") {
			showError($("#unitnamed"), 'Required');
			hasError = true;
		} else {
			hideError($("#unitnamed	"));
		}


		// Display alert only if there are errors
		if (hasError) {
			alert("Please fill out all required fields");

		} else {
			var deviceid = document.getElementById('device_id').value;
			$.ajax({
				url: './DeviceMan',
				data: $("#DeviceForm").serialize(),
				type: 'PUT',
				success: function (data) {
					// Create a modal with success message and close button
					var modalContent = '<div class="modal" id="successRateModal">';
					modalContent += '<div class="modal-dialog modal-dialog-centered">';
					modalContent += '<div class="modal-content">';
					modalContent += '<div class="modal-header">';
					modalContent += '<p>Modified Successfully</p>';
					modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
					modalContent += '</div>';
					modalContent += '<div class="modal-footer">';
					modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
					modalContent += '</div>';
					modalContent += '</div>';
					modalContent += '</div>';
					modalContent += '</div>';

					// Append the modal to the body
					$('body').append(modalContent);

					// Show the modal
					$('#successRateModal').modal('show');
				}
			});
		}
	}
	function Submitfees(a) {
		var message_ref = document.getElementById('message_ref').value;
		$.ajax({
			url: './FeesCharge',
			data: $("#FeesForm").serialize(),
			type: 'POST',
			success: function (data) {
				// Create a modal with success message and close button
				var modalContent = '<div class="modal" id="successRateModal">';
				modalContent += '<div class="modal-dialog modal-dialog-centered">';
				modalContent += '<div class="modal-content">';
				modalContent += '<div class="modal-header">';
				modalContent += '<p>Added Successfully</p>';
				modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
				modalContent += '</div>';
				modalContent += '<div class="modal-footer">';
				modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';

				// Append the modal to the body
				$('body').append(modalContent);

				// Show the modal
				$('#successRateModal').modal('show');
			}
		});
	}

	// Download QR Image

	function downloadQRCodeAsPDF() {

		var qrCodeImageBase64 = document.getElementById('qrCodeImage').getAttribute('src').split(',')[1];
		var dataUrl = 'data:image/png;base64,' + qrCodeImageBase64;
		var link = document.createElement('a');
		link.href = dataUrl;
		link.target = '_blank';
		link.download = 'Static_QRcode.png';
		document.body.appendChild(link);
		link.click();
		document.body.removeChild(link);

	}

	function downloadQRCodeAsPDF1() {

		var qrCodeImageBase64 = document.getElementById('qrCodeImage').getAttribute('src').split(',')[1];
		var dataUrl = 'data:image/png;base64,' + qrCodeImageBase64;
		var link = document.createElement('a');
		link.href = dataUrl;
		link.target = '_blank';
		link.download = 'Dynamic_QRcode.png';
		document.body.appendChild(link);
		link.click();
		document.body.removeChild(link);

	}

	function shareContent1() {
		// Get the base64-encoded QR code image from the image element with id "qrCodeImage"
		var qrCodeImageBase64 = document.getElementById('qrCodeImage').getAttribute('src').split(',')[1];
		// Create a Data URL for the image
		var dataUrl = 'data:image/png;base64,' + qrCodeImageBase64;
		// Encode the image as a base64 string
		var encodedData = encodeURIComponent(qrCodeImageBase64);
		// Create the mailto link with the image embedded in the email body
		var mailtoLink = 'mailto:?subject=QR Code&body=Please find attached the QR code image.%0D%0A%0D%0A<img src="data:qrCodeImage/png;base64,' + qrCodeImageBase64 + '">';
		// Open the mailto link
		window.location.href = mailtoLink;
	}

	function DownloadQRCode() {
		var qrsource1 = $("#qrsource").val();
		var qrname = $("#qrsourcename").val();
		var qrnumber = $("#qrsourcenumber").val();
		var a = document.createElement("a");
		a.href = qrsource1;
		a.download = qrnumber + "Dynamic QRCode" + qrname + ".png";
		a.click();
	}
	function printScreen() {
		// Get the content of the printContainer
		var printContent = document.getElementById("printContainer").innerHTML;

		// Get the values of the input fields
		var tranIDValue = document.getElementById("tranID").value;
		var tranDateTimeValue = document.getElementById("tranDateTime").value;
		var trAmtValue = document.getElementById("trAmt1").value;

		// Append the input field values to the corresponding labels in the printContent
		printContent = printContent.replace('Transaction:ID', 'Transaction:ID ' + tranIDValue);
		printContent = printContent.replace('Transaction:Date', 'Transaction:Date' + tranDateTimeValue);
		printContent = printContent.replace('AMOUNT: BWP', 'AMOUNT: BWP ' + trAmtValue);

		// Create a new window and write the modified content
		var printWindow = window.open('', '_blank');
		printWindow.document.open();
		printWindow.document.write('<html><head><title>Print</title></head><body>' + printContent + '</body></html>');
		printWindow.document.close();

		// Print the window
		printWindow.print();
	}

	function shareContent() {
		if (navigator.share) {
			// Use the Web Share API
			navigator.share({
				title: 'Share Title',
				text: 'Content to be shared.',
				url: 'https://example.com'
			})
				.then(() => console.log('Shared successfully'))
				.catch((error) => console.error('Error sharing:', error));
		} else {
			// Fallback for browsers that do not support Web Share API
			alert('Web Share API not supported. You can manually share the content.');
			// Open Gmail with mailto link
			window.location.href = 'mailto:?subject=QR Code&body=Content to be shared: https://example.com';
		}
	}

</script>
<!-- <script>
	document.getElementById('scannedqrformDynam').addEventListener('submit', function (event) {
		event.preventDefault();
		SubDynam();
	});

</script>
<script>
	document.getElementById('scannedqrformStat').addEventListener('submit', function (event) {
		event.preventDefault();

	});
</script> -->
<script>
	function listuser(a) {
		var user_id = a.getAttribute("data-user_id");
		location.href = 'merchantOperation?formmode=viewuser&user_id=' + user_id
	}

	function listuser2(user_id) {
		location.href = 'merchantOperation?formmode=viewuser&user_id=' + user_id;
	}
	function useredit() {
		var user_id = document.getElementById("user_id").value;
		location.href = 'merchantOperation?formmode=edituser&user_id=' + user_id
	}
	function listRate(a) {
		var srl = a.getAttribute("data-srl");
		location.href = 'merchantOperation?formmode=viewRate&srl=' + srl
	}
	function Rateedit() {
		var srl = document.getElementById("srl").value;
		location.href = 'merchantOperation?formmode=editRate&srl=' + srl
	}
	function listDevice(a) {
		var device_id = a.getAttribute("data-device_id");
		location.href = 'merchantOperation?formmode=viewdevice&device_id=' + device_id
	}
	function Deviceedit() {
		var device_id = document.getElementById("device_id").value;
		location.href = 'merchantOperation?formmode=editdevice&device_id=' + device_id
	}
	function listfees(a) {
		var message_ref = a.getAttribute("data-sequence_unique_id");
		location.href = 'merchantOperation?formmode=viewfees&message_ref=' + message_ref
	}
	function listfees2(message_ref) {
		location.href = 'merchantOperation?formmode=viewfees&message_ref=' + message_ref
	}
	function listcharge(a) {
		var message_ref = a.getAttribute("data-sequence_unique_id");
		location.href = 'merchantOperation?formmode=addCharge&message_ref=' + message_ref;
	}
	function feesedit() {
		var message_ref = document.getElementById("message_ref").value;
		location.href = 'merchantOperation?formmode=editfees&message_ref=' + message_ref;
	}
	function customerTranView(a) {
		var message_ref = a.getAttribute("data-sequence_unique_id");
		location.href = 'merchantOperation?formmode=customerView&message_ref=' + message_ref;
	}
	function customerTranView2(sequenceUniqueId) {
		location.href = 'merchantOperation?formmode=customerView&message_ref=' + sequenceUniqueId;
	}
</script>
<script>
	$(document).ready(function () {
		$('#usertable').DataTable({
			"destroy": true,
			"scrollCollapse": true,
			"paging": true,
			"autoWidth": false,
			"ordering": true,
			"oLanguage": {
				"sSearch": "",
				"sSearchPlaceholder": "Search Here"
			},
			"searching": true,
			"pageLength": 8,
			"lengthChange": false,
		});
	});
</script>
<script>
	function handleRevert() {
		var reversalDateInput = document.getElementById("reversal_date");
		var reversalAmountInput = document.getElementById("reversal_amount");
		var billAmountInput = document.getElementById("bill_amount");
		var reversalRemarksInput = document.getElementById("reversal_remarks"); // Get the input field for reversal remarks

		// Check if reversal date is empty, if so, set it to current date
		if (reversalDateInput.value.trim() === "") {
			reversalDateInput.value = formatDate(new Date());
		}

		// Check if reversal amount is empty, if so, set it to the value of bill amount
		if (reversalAmountInput.value.trim() === "") {
			reversalAmountInput.value = billAmountInput.value.trim();
		}

		// Set the value of reversal remarks field to "Reversed"
		reversalRemarksInput.value = "REVERTED";

		// Call SubmitCharge function
		SubmitCharge();
	}


	// Function to format date as "dd-MM-yyyy"
	function formatDate(date) {
		var day = date.getDate();
		var month = date.getMonth() + 1;
		var year = date.getFullYear();

		// Add leading zeros if necessary
		if (day < 10) {
			day = '0' + day;
		}
		if (month < 10) {
			month = '0' + month;
		}

		return day + '-' + month + '-' + year;
	}

	function SubmitCharge() {
		var message_id = document.getElementById('sequence_unique_id').value;
		$.ajax({
			url: './ChargeBacks',
			data: {
				message_id: message_id
			},
			type: 'POST',
			success: function (data) {
				// Create a modal with success message and close button
				var modalContent = '<div class="modal" id="successModal">';
				modalContent += '<div class="modal-dialog">';
				modalContent += '<div class="modal-content">';
				modalContent += '<div class="modal-header">';
				modalContent += '<p>' + data + '</p>';
				modalContent += '<button type="button" class="close" data-dismiss="modal">&times;</button>';
				modalContent += '</div>';
				modalContent += '<div class="modal-footer">';
				modalContent += '<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="back();">Close</button>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';
				modalContent += '</div>';

				// Append the modal to the body
				$('body').append(modalContent);

				// Show the modal
				$('#successModal').modal('show');
			}
		});
	}
</script>
<script type="text/javascript">
	//generate dynamic qr code

	//dunamic model for generate qr
	function DynamicQR(a) {
		var merchant_acct_no = a.getAttribute("data-bank_code");
		var merchant_bill_number = a.getAttribute("data-billNumber");
		var merchant_mobile = a.getAttribute("data-mobile");
		var merchant_store_label = a.getAttribute("data-storeLabel");
		var merchant_loyalty_number = a.getAttribute("data-loyaltyNumber");
		var merchant_reference_label = a.getAttribute("data-referenceLabel");
		var merchant_customer_label = a.getAttribute("data-customerLabel");
		var merchant_terminal_label = a.getAttribute("data-terminalLabel");
		var merchant_purp_tran = a.getAttribute("data-purposeTran");
		var merchant_additional = a.getAttribute("data-data-additionalDetails");
		$("#merchantID_DY").val(merchant_acct_no);
		var acct_name = a.getAttribute("data-acct_name");
		$("#qrsourcename").val(acct_name);
		$("#qrsourcenumber").val(merchant_acct_no);
		$("#tran_amt_dy").val('');
		$("#bill_number_dy").val(merchant_bill_number);
		$("#mobile_number_dy").val(merchant_mobile);
		$("#loyalty_number_dy").val(merchant_loyalty_number);
		$("#store_label_dy").val(merchant_store_label);
		$("#customer_label_dy").val(merchant_customer_label);
		$("#reference_label_dy").val(merchant_reference_label);
		$("#terminal_label_dy").val(merchant_terminal_label);
		$("#purpose_of_transaction_dy").val(merchant_purp_tran);
		$("#additional_details_dy").val(merchant_additional);
		$("#QRdynamic").modal("toggle");
		/* location.href = './MerchantQRREG?formmode=qrcodedynamic&merchant_acct_no='
				+ merchant_acct_no;  */
	}

	function togglePasswordVisibility1() {
		var passwordInput = document.getElementById("pw");
		var eyeIcon = document.getElementById("eye-icon");

		if (passwordInput.type === "password") {
			passwordInput.type = "text";
			eyeIcon.classList.remove("fa-eye-slash");
			eyeIcon.classList.add("fa-eye");
		} else {
			passwordInput.type = "password";
			eyeIcon.classList.remove("fa-eye");
			eyeIcon.classList.add("fa-eye-slash");
		}
	}


	function SubmitService(a) {
		if ($("#ServiceForm").valid()) {
			$.ajax({
				url: './ServiceRequest',
				data: $("#ServiceForm").serialize(),
				type: 'POST',
				success: function (data) {
					 $('#myModalpopup2').modal("toggle");
		             $('#myModalpopup2 .modal-body').text(data.replace(/"/g, ''));
				},
				error: function (xhr, status, error) {
					var errorMessage = 'Error: ' + xhr.responseText + ' (Status: ' + status + ')';
					$('#myModalpopup2').modal("toggle");
		             $('#myModalpopup2 .modal-body').text(errorMessage);
				}
			});
		}
	}

	function SubmitNotification(a) {
		if ($("#NotificationForm").valid()) {
			$.ajax({
				url: './submitnotification',
				data: $("#NotificationForm").serialize(),
				type: 'POST',
				success: function (data) {
					$('#myModalpopup2').modal("toggle");
		            $('#myModalpopup2 .modal-body').text(data.replace(/"/g, ''));
				},
				error: function (xhr, status, error) {
					var errorMessage = 'Error: ' + xhr.responseText + ' (Status: ' + status + ')';
					$('#myModalpopup2').modal("toggle");
		             $('#myModalpopup2 .modal-body').text(errorMessage);
				}
			});
		}
	}
</script>
<script>
	function toggleExtraInput() {
		document.getElementById('unitInput').style.display = 'none';
		document.getElementById('deviceInput').style.display = 'none';
		document.getElementById('userInput').style.display = 'none';

		if (document.getElementById('unit').checked) {
			document.getElementById('unitInput').style.display = 'block';
		} else if (document.getElementById('device').checked) {
			document.getElementById('deviceInput').style.display = 'block';
		} else {
			document.getElementById('userInput').style.display = 'block';
		}
	}

	$(function () {
		$("#Fromdate").datepicker({
			changeMonth: true,
			changeYear: true,
			dateFormat: "dd-mm-yy",
			maxDate: 0,
			onSelect: function (selected) {
				var dt = $(this).datepicker('getDate');
				dt.setDate(dt.getDate());
				$("#Todate").datepicker("option", "minDate", dt);

			}
		});
		$("#Todate")
			.datepicker(
				{
					changeMonth: true,
					changeYear: true,
					maxDate: 0,
					dateFormat: "dd-mm-yy",
					onSelect: function (selected) {
						var dt = new Date(selected);
						dt.setDate(dt.getDate() - 1);
						var Fromdate = document
							.getElementById("Fromdate").value;
						var Todate = document.getElementById("Todate").value;
					}
				});
	});

	function isValidBigDecimal(value) {
		const regex = /^\d+(\.\d{1,2})?$/;
		if (!regex.test(value)) {
			return false;
		}
		let number = parseFloat(value);
		if (isNaN(number) || !isFinite(number)) {
			return null;
		}
		return number.toFixed(2);
	}

	function handleInputUserId(input) {
		input.value = input.value.replace(/[^a-zA-Z0-9\s]/g, '').toUpperCase().trim();
	}
	
	document.getElementById("myForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
    });


</script>

<script>
	function PrintScrn() {
	    const originalContent = document.body.innerHTML;
	    const headerContent = document.querySelector('.card-header').outerHTML;
	    const formContent = document.getElementById('ChargeForm').outerHTML;
	    const footerContent = document.querySelector('.card-footer').outerHTML;
	    const printableContent = `
	        <div class="card" style="border: 1px solid black; padding: 10px; margin: 20px;">
	            ${headerContent}
	            <div class="card-body" style="background-color: gainsboro;">
	                ${formContent}
	            </div>
	            <div class="card-footer text-center">
	                <!-- Exclude the buttons here by removing them from the content -->
	            </div>
	        </div>
	    `;
	    document.body.innerHTML = printableContent;
	    window.print();
	    document.body.innerHTML = originalContent;
	}

    function miniPrintScrn() {
        const formContent = document.querySelector(".card-body").innerHTML;
        const printWindow = window.open("", "_blank");
        const miniPrinterHtml = `
            <!DOCTYPE html>
            <html>
            <head>
                <title>Print</title>
                <style>
                    body {
                        font-
                        font-family: Arial, sans-serif;
                        margin: 0;
                        padding: 0;
                        width: 45mm;
                    }
                    @page {
                        size: 45mm auto;
                        margin: 0mm;
                    }
                    .content {
                        text-align: left;
                        width: 100%;
                        margin: 0;
                    }
                    .title {
                        font-size: 12px;
                        font-weight: bold;
                        text-align: center;
                        margin-bottom: 5px;
                    }
                    .formline {
                        margin-bottom: 5px;
                    }
                    .row {
                        display: flex;
						justify-content: space-between;
                        margin: 0px 0;
                    }
                    label {
                        font-size:8px;
						font-weight: bold;
                    }
                    .form-control-sm {
                        font-size: 7px;
						margin-left: 10px;
                        border: none;
                        width: 100%;
                        padding: 1px;
						font-weight: bold;
                    }
                    .card-footer {
                        display: none;
                    }
                </style>
            </head>
            <body>
                <div class="content">
                    <div class="title">Customer Transaction</div>
                    <div class="bordered">
                        ${formContent}
                    </div>
                </div>
            </body>
            </html>
        `;
        printWindow.document.open();
        printWindow.document.write(miniPrinterHtml);
        printWindow.document.close();
        printWindow.print();
        printWindow.close();
    }
</script>
</html>